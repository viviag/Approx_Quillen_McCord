\documentclass[a4paper, 12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage{amsmath,amssymb,amsthm}
\usepackage[a4paper,hmargin=2.5cm,vmargin=2.5cm]{geometry}
\usepackage[english,russian]{babel}

\newtheorem{proposition}{Proposition}
\newtheorem{lemma}{Lemma}
\newtheorem{corollary}{Corollary}
\newtheorem{statement}{Statement}
\newtheorem{theorem}{Theorem}

\theoremstyle{definition}
\newtheorem{definition}{Definition}
\newtheorem{example}{Example}

\newtheorem{property}{Property}

\theoremstyle{remark}
\newtheorem{remark}{Remark}

\newenvironment{pf}{\noindent\textbf{Proof.} ~ \par}{\qed}
\newcommand{\define}[1]{{\textit{#1}}}

\title{Approximate Homological Version of Quillen-McCord Theorem}
\author{Vitalii Guzeev, Anton Ayzenberg}

\begin{document}

\section{Abstract}

Combinatorial topology has recently been successfully applied to data analysis. One approach is to compute homology groups of some persistence complex constructed by experimental data and try to classify some objects by them. However complexity of computation of persistent homology is high enough to limit practical usage of the approach.\\

There is a question of how to construct persistent complex with same homology as initially given with smaller dimension. In this paper we prove Quillen-McCord theorem (Quillen fiber lemma) in the setting of persistent homology. It can possibly be used to reduce persistence complex to smaller one if given complex is equivalent to a nerve of some partially ordered set.

\section{Preliminaries}

We expect reader to be familiar with several notions which frequently appear in introductory courses in homological and commutative algebra or topology: chain complex, chain map, homology of a chain complex, homotopy equivalence, filtration, category, functor, graded ring etc.\\

\subsection{Persistence modules and $\varepsilon$-interleavings}

Basic definition is the following:

\begin{definition}
  \define{Persistence complex} is a family of chain complexes $C_{\star}^{i_0} \xrightarrow{f_{i_0}} C_{\star}^{i_1} \xrightarrow{f_{i_1}} C_{\star}^{i_2} \xrightarrow{f_{i_2}} \ldots$ with $I$ --- some indexing set and $f_i$ being chain maps.
\end{definition}

These objects naturally arise in experiments. If we consider $I$ as time, this is a structure we obtain while observing some dynamic structure which can at any time be represented by a chain complex.\\

\begin{definition}
  Let $R$ be a ring. \define{Persistence module} is a family of $R$-modules $M^i$ with homomorpisms $\phi_i :: M^i \to M^{i+1}$.
\end{definition}

Example of a persistent module is given by homology modules of persistence complex $C_{\star}$ (\define{persistent homology}). $H_i^j(C_{\star}) = H_i(C_{\star{j}})$, maps $\phi_j$ are induced by $f_i$.\\

\begin{definition}
  Persistence complex (module) is of \define{finite type} over $R$ if all component complexes (modules) are finitely-generated as $R$-modules and all $f_i$ ($\phi_i$) are isomorphisms for $i > m$ for some $m$.
\end{definition}

Since experiments usually take finite time and operate finite amount of data, we can safely consider only complexes of finite type. Note that by construction homology of complex of finite type is a module of finite type.\\

\begin{definition}
  \define{Graded module} over $I$-graded ring $R$ with graded components $R_i$ is an $R$-module $M$ together with a decomposition $M = \bigoplus_{j \in I} M^j:\; \forall i \in I\, R_i \cdot M^j \subset M^{j+i}$. For correctness of the definition it's enough for $I$ to be a semigroup.
\end{definition}

% Why only linear?
\begin{definition}
  Assume $I$ is a monoid with linear order. Then \define{non-negatively graded module} over $I$-graded ring $R$ is an $R$-module $M$ together with a decomposition $M = \bigoplus_{j \in I} M^j:\; \forall i \in I_{\geq 0}\, R_i \cdot M^j \subset M^{j+i}$
\end{definition}

\begin{proposition}. The following hold:
  \begin{enumerate}
    \item Graded modules over $R$ form a category.
    \item Non-negatively graded modules over $R$ form a category.
  \end{enumerate}
\end{proposition}

Morphisms in both these categories are morphisms $\phi$ between modules $M$ and $N$ such that $\phi(M^j) \subset N^j$ for all $j$ in indexing set.\\

\begin{theorem} {\cite[Theorem 3.1]{Zomorodian05}}\\
  Category of persistence modules of finite type over $R$ is equivalent to category of non-negatively graded finitely generated $R[t]$-modules.
\end{theorem}

\begin{remark}
  If $R$ is a field then $R[t]$ is a PID and graded ideals are exactly $t^n$ for $n \in I_{\geq 0}$.
\end{remark}

% Continuous time?

We have introduced a setting to work with persistence complexes as with graded modules. However computations in a category of non-negatively graded modules are not fit for applications since experiment always comes with an error and we do not have a measure for similarity of two persistence modules. We need technique which allows to construct morphisms of deformed complexes and track error propagation. This technique is developed in {\cite{GS16}}, we will recall it without proofs.

\begin{definition} {\cite[Definition 2.7]{GS16}}\\
  Let $M$ and $N$ be persistent modules, $f : M \to N$ be a homomorphism of modules. Then $f$ is called \define{$\varepsilon$-morphism} if $f(M^j) \subset N^{j+\varepsilon}$ for $\varepsilon \geq 0$.
\end{definition}

\begin{remark}
  Note that $0$-morphism is a morphism in category of non-negatively graded modules over $R[t]$.
\end{remark}

\begin{remark}
  Let $R$ be a field. Then for every persistence module $M$ and any $\varepsilon$ there exists morphism $Id_{\varepsilon}$ such that $Id_{\varepsilon}(a) = t^{\varepsilon}a$.
\end{remark}

\begin{remark}
  Restriction on $R$ to be a field is crucial for construction. It is a strong restriction, however, it is acceptable.
\end{remark}

\begin{definition}
  Persistence modules $M$ and $N$ are called \define{$\varepsilon$-interleaved} ($M \stackrel{\varepsilon}{\sim} N$) if there exist pair of $\varepsilon$-morphisms $(\phi : M \to N,\;\psi : N \to M)$ (\define{$\varepsilon$-interleaving}) such that $\phi \circ \psi = Id_{2\varepsilon} : N \to N$ and $\psi \circ \phi = Id_{2\varepsilon} : M \to M$.
\end{definition}

\begin{remark}
There follows that $M \stackrel{\varepsilon}{\sim} N$ implies $M \stackrel{\alpha}{\sim} N$ for any $\alpha > \varepsilon$ since for $\varepsilon$-interleaving $(\phi, \psi)$ we have $\alpha$-interleaving $(Id_{\alpha - \varepsilon} \circ \phi, Id_{\alpha - \varepsilon} \circ \psi)$.
\end{remark}

\begin{definition}
  We denote as \define{$\varepsilon$-equivalence} relation with the following properties:\\
  For any $M$, $N$, $L$, $\varepsilon$, $\varepsilon_1$, $\varepsilon_2$
  \begin{itemize}
    \item $M \stackrel{0}{\sim} M$.
    \item $M \stackrel{\varepsilon}{\sim} N$ is equivalent to $N \stackrel{\varepsilon}{\sim} M$.
    \item if $M \stackrel{\varepsilon_1}{\sim} N$ and $N \stackrel{\varepsilon_2}{\sim} L$ then $M \stackrel{\varepsilon_1 + \varepsilon_2}{\sim} L$.
  \end{itemize}
\end{definition}

\begin{proposition}
  $\varepsilon$-interleaved persistence modules are $\varepsilon$-equivalent.
\end{proposition}

\begin{definition}
  Persistent module $M$ is called \define{$\varepsilon$-trivial} if $M \stackrel{\varepsilon}{\sim} 0$. It is equivalent to $t^{2\varepsilon}M = 0$.
\end{definition}

\begin{lemma}
  Let $0 \to M \to L \to N \to 0$ be a short exact sequence. Then the following properties hold:
  \begin{itemize}
    \item If $M \stackrel{\varepsilon_1}{\sim} 0$ and $N \stackrel{\varepsilon_2}{\sim} 0$ then $L \stackrel{\varepsilon_1 + \varepsilon_2}{\sim} 0$.
    \item If $L \stackrel{\varepsilon}{\sim} 0$ then $M \stackrel{\varepsilon}{\sim} 0$ and $N \stackrel{\varepsilon}{\sim} 0$.
  \end{itemize}
\end{lemma}

\subsection{Quillen-McCord theorem}

We give a formulation of classical theorem and then descend from general categorical case to specific. General case is not necessary for understanding of the paper. However, it is interesting to follow.\\

\begin{definition}
  \define{Simplex category} $\Delta$ is the category with objects --- nonempty linearly ordered sets of the form $[n] = \{0,1,\ldots,n\}$ with $n \geq 0$ and morphisms --- order-preserving functions.
\end{definition}

All morphisms in the simplex category are compositions of injective maps $\delta_i^n : \{0,1,\ldots,i-1,i+1\ldots,n\} \mapsto \{0,1,\ldots,i-1,i,i+1,\ldots,n\}$ and surjective maps $\sigma^n_i : \{0,1,\ldots,i,i+1,i+2\ldots,n\} \mapsto \{0,1,\ldots,i,i+1,\ldots,n\}$.

\begin{definition}
  \define{Simplicial set} $S$ is a contravariant functor $\Delta \to Set$. Objects of image of $S$ are called simplices, cardinality of a simplex is called a dimension of a simplex. We will identify $s$ with set of its simplices while keeping in mind general structure.
\end{definition}

Simplicial sets form a category under natural transformations (category of presheaves on $\Delta$).\\

\begin{definition}
  Simplicial set $S$ is called a \define{simplicial complex} if for any $s \in S$ s.t. $v \subset s$  $v \in s$ and $S$ is faithful.
\end{definition}

We will also use the following definitions:

\begin{definition}
  \define{Join} $A \star B$ of simplicial complexes $A$ and $B$ is the simplicial complex with simplices --- all possible unions of simplices $a \in A$ and $b \in B$.
\end{definition}

\begin{definition}
  \define{Join} of topological spaces $A$ and $B$ is defined as follows: $A \star B\ := A \sqcup_{p_0} (A \times B \times [0,1]) \sqcup_{p_1} B$, where $p$ are projections of the cylinder $A \times B \times [0,1]$ onto faces.
\end{definition}

\begin{definition}
  \define{Star} $\operatorname{st}(x)$ of simplex $x \in A$ ($A$ simplicial complex) is the simplicial complex with simplices --- all simplices $a \in A$ such that there exists inclusion $x \hookrightarrow a$.
\end{definition}

\begin{definition}
  Functor $\mathcal{K} : \Delta \to Top$ which maps simplices to geometric simplices of corresponding dimension and morphisms to inclusions of faces and restrictions to subcomplexes is called \define{geometric realization}.
\end{definition}

\begin{proposition}
  $\mathcal{K}(A \star B) = \mathcal{K}(A) \star \mathcal{K}(B)$
\end{proposition}

Let $C$ denote a category. We can construct the simplicial set called \define{nerve of category $C$} as follows:\\
Let objects of $C$ be the only 0-dimensional simplices. Then let all morphisms be 1-dimensional simplices, all composable pairs of morphisms be 2-dimensional simplices and so on.

\begin{definition}
  Geometric realization $BC$ of nerve of the category $C$ is called \define{classifying space} of $C$.
\end{definition}

\begin{definition}
  Let $f: C \to D$ be a functor and $d$ --- object in $D$. Then \define{comma category} $d \downarrow f$ is a category with objects --- pairs $(s,i_s)$ of objects in $C$ and morphisms $i_s : d \to f(s)$ and morphisms --- morphisms $g$ in $C$ such that $f(g)$ commutes with $i_s$ and $i_{g(s)}$.
\end{definition}

\begin{theorem} {\cite[Theorem A]{Quillen72}}\\
  If $f: C \to D$ is a functor such that the classifying space $B(d \downarrow f)$ of the comma category $d \downarrow f$ is contractible for any object $d \in D$, then $f$ induces a homotopy equivalence $BC \to BD$.
\end{theorem}

Every poset $X$ with order relation $R$ can be seen as a category if we set $\operatorname{Ob}(X) = X$ and $Hom_X(a,b) = \{\phi\}$ if $(a,b) \in R$ and $\emptyset$ otherwise. Note that map between posets is functorial if and only if it preserves order.\\
Nerve construction on a poset yields a simplicial complex called \define{order complex}. Application of Quillen A theorem to posets yields the following theorem:

\begin{theorem} \textbf{Quillen-McCord theorem}\\
  Assume $X, Y$ are finite posets, $f : X \to Y$ is order-preserving map.\\
  If $\forall y \in Y\;\mathcal{K}(f^{-1}(Y_{\leqslant y}))$ is contractible, then $\mathcal{K}f$ is a homotopy equivalence.\\
\end{theorem}

There holds simple {\cite[Theorem 1.2]{Bar11}} and homological {\cite[Corollary 5.5]{Bar11}} versions of this theorem:

\begin{theorem} \textbf{Simple Quillen-McCord theorem}\\
  Assume $X, Y$ are finite posets, $f : X \to Y$ is order-preserving map.\\
  If $\forall y \in Y\;\mathcal{K}(f^{-1}(Y_{\leqslant y}))$ is contractible, then $\mathcal{K}f$ is a simple homotopy equivalence.\\
\end{theorem}

\begin{theorem} \textbf{Homological Quillen-McCord theorem}\\
  Assume $X, Y$ are finite posets, $f : X \to Y$ is order-preserving map.\\
  If $\forall y \in Y\;\mathcal{K}(f^{-1}(Y_{\leqslant y}))$ is acyclic, $\mathcal{K}f$ induces isomorphisms of all homology groups.\\
\end{theorem}

Proofs of both theorems are necessary for construction of a desired result and will be recalled in section 2.4 with a constructive proof of Quillen-McCord theorem {\cite[Proof of Theorem 1.1]{Bar11}}.\\

\subsection{Statement of the theorem}

Assume we conduct an experiment and observe dynamics of a simplicial complex $S^{i_0} \xrightarrow{f_{i_0}} S^{i_1} \xrightarrow{f_{i_1}} S^{i_2} \xrightarrow{f_{i_2}} \ldots$. Denote the whole sequence as $S$. For each simplicial complex $S^{i}$ we can assign chain complex $C_{\star}^{i}$ via standard construction of simplicial chain complex used in the definition of simplicial homology. We will sometimes identify simplicial complex with corresponding chain complex.\\

I.e. we observe persistence chain complex $C_{\star}^{i_0} \xrightarrow{f'_{i_0}} C_{\star}^{i_1} \xrightarrow{f'_{i_1}} C_{\star}^{i_2} \xrightarrow{f'_{i_2}} \ldots$. Each simplicial complex in a series has geometric realization with the same homology as its chain complex.

\begin{definition}
  We will denote as \define{persistence topological space} $X$ sequence of topological spaces $X^{i_0} \xrightarrow{f_{i_0}} X^{i_1} \xrightarrow{f_{i_1}} X^{i_2} \xrightarrow{f_{i_2}} \ldots$ with compatible triangulations (chain complexes formed by simplicial complexes) $C_{\star}^{i}$ such that $C_{\star}$ is a persistence complex with structure maps induced by $f_i$. Homology of $X$ is a persistence module with components --- homology modules of $X^i$.\\

  We will denote as morphism $g$ between persistence topological spaces $X$ and $Y$ collection of maps $g_i : X^i \to Y^i$ between components such that all $g_i$ commute with $f_i$.
\end{definition}

Apparently $\mathcal{K}S$ is a persistence topological space.\\

\begin{definition}
  Persistence topological space $X$ is called \define{$\varepsilon$-acyclic} if for all indices\\ $H_i(X,R) \stackrel{\varepsilon}{\sim} 0$.
\end{definition}

\begin{definition}
  Consider pair of morphisms $(f : X \to Y, g : Y \to X)$ between persistence topological spaces. It is called homological $\varepsilon$-equivalence if induced maps on graded homology modules form $\varepsilon$-interleaving.
\end{definition}

To formulate a theorem we have to move to terms of posets. Define \define{persistence poset} as series of posets with structure maps analogously to persistence complexes and map of persistence posets as collection of maps between posets commuting with structure maps. It induces map on persistence order complexes. We also analogously define persistence poset of finite type --- it is a finite sequence of finite posets. Easy to see that nerve (as a functor) of persistence poset of finite type is a persistence complex of finite type.\\
We also need some restricting technical conditions on structure maps of persistent order complex. We will specify them during the proof since they are the major limiting factor in applications of the theorem.

\begin{theorem} \textbf{Approximate Quillen-McCord theorem, draft statement}\\
  Assume $X, Y$ are persistent posets of finite type with structure maps satisfying additional conditions, $f : X \to Y$ is order-preserving map.\\
  If $\forall y \in Y\;\mathcal{K}(f^{-1}(Y_{\leqslant y}))$ is $\varepsilon$-acyclic, $\mathcal{K}f$ induces $e$-interleavings of all homology modules with coefficients in a field or $\mathbb{Z}$.\\
\end{theorem}

Value of $e$ will also be specified during the proof and is critical to applications being measure of error of approximation.

\subsection{Prerequisite results}

\subsubsection{Simple Quillen-McCord theorem}

\subsubsection{Homological Quillen-McCord theorem}

\subsubsection{Error propagation in Mayer-Vietoris spectral sequence}

\section{Results}

\section{References}

\begin{enumerate}
  \bibitem[Bar11]{Bar11}
  Jonathan Ariel Barmak. 2011.
  \newblock On Quillen’s Theorem A for posets.
  \newblock J. Comb. Theory Ser. A 118, 8 (November 2011), 2445–2453.
  \newblock DOI:https://doi.org/10.1016/j.jcta.2011.06.008
  \bibitem[Zomorodian05]{Zomorodian05}
  A. Zomorodian and G. Carlsson.
  \newblock Computing persistent homology.
  \newblock In: Discrete and Computational Geometry 33.2 (2005), pp. 249–274.
  \bibitem[GS16]{GS16}
  Govc, Dejan \& Skraba, Primoz. (2016).
  \newblock An Approximate Nerve Theorem.
  \newblock Foundations of Computational Mathematics.
  \newblock 10.1007/s10208-017-9368-6.
  \bibitem[Quillen72]{Quillen72}
  Daniel Quillen,
  \newblock Higher algebraic K-theory, I: Higher K-theories Lect.
  \newblock Notes in Math. 341 (1972), 85-1
\end{enumerate}

\subsection*{4. Доказательство теорем 1 и 2}

Авторство излагаемых в этой разделе доказательств принадлежит [1], но без их подробного изложения здесь не представляется возможным понятно изложить доказательство основной теоремы.\\

\begin{lemma}
  Пусть $f,g :: X \to Y$ --- морфизмы конечных чумов такие, что $f \leqslant g$ на всех симплексах. Тогда $\mathcal{K}(f)$ гомотопно $\mathcal{K}(g)$.
\end{lemma}
\begin{proof}
  Построим функцию $h_1 :: X \to Y$, совпадающую с $f$ на всех элементах, кроме любого максимального. На этом элементе пусть $h = g$. Это отображение, сохраняющее порядок. Аналогичное отображение $h_2$ можно построить для $h_1$ и $g$.
  Из конечности $X$ следует, что цепочка $h_0 = f \leqslant h_1 \leqslant \ldots \leqslant h_{n-1} \leqslant g = h_n$ конечна.

  Между $\mathcal{K}(h_i)$ и $\mathcal{K}(h_{i+1})$ существует линейная гомотопия --- образы $f$ и $g$ сравнимы. Значит, по транзитивности существует гомотопия $\mathcal{K}(f) ~ \mathcal{K}(g)$.
\end{proof}

Расширим одно из используемых обозначений ---  будем обозначать как $X_{op x}$ $\{x' \in X: x' op X\}$. $op \in \{<, \leqslant, >, \geqslant\}$.

\begin{proposition}
  Заметим, что $lk(v) = Ord(X_{>v}) * Ord(X_{<v})$ и, соответственно, $|lk(v)| = \mathcal{K}(X_{>v}) * \mathcal{K}(X_{<v})$.\\
  Также заметим, что $st(v) = lk(v) * v$, следовательно, $|st(v)| = |lk(v)| * |v|$ --- конус над вершиной $v$.
\end{proposition}

\begin{lemma}
  Пусть $X$ --- конечное частично упорядоченное множество, $x \in X$ --- элемент такой, что или $K(X_{>x})$, или $K(X_{<x})$ стягиваем. Тогда вложение $K(X\setminus\{x\}) \hookrightarrow \mathcal{K}(X)$ является гомотопической эквивалентностью.
\end{lemma}
\begin{proof}
  По условию и наблюдению $lk(x) = st(x) \cap K(X \setminus \{x\})$ стягиваем. Тогда вложение подкомплекса $lk(x) \to st(x)$ является слабой гомотопической эквивалентностью, так как $st(x)$ по наблюдению --- конус над $lk(x)$, следовательно, стягиваем. Это вложение является гомотопической эквивалентностью.\\
  Например, это следует из теоремы Уайтхеда, если ввести на комплексе точно соответствующую симплициальной клеточную структуру, в которой симплекс из $k$ элементов отображается в $k$-клетку, а вложение в композицию характеристических отображений.
\end{proof}

\begin{definition}
  Пусть $f :: X \to Y$ --- морфизм чумов. Назовём цилиндром $B(f)$ отображения $f$ чум, множество которого --- $X \coprod Y$, отношения порядка на $X$ и $Y$ сохраняются и добавляется набор соотношений $x \leqslant y$, если $f(x) \leqslant y$, в частности, $x \leqslant f(x)$ является единственным новым определяющим соотношением.\\
  Канонические вложения будем обозначать как $i :: X \to B(f)$ и $j :: Y \to B(f)$.
  \textit{Мы стараемся не говорить о цилиндре отображения множеств, снабжённых топологией Александрова, чтобы не перегружать конструкцию терминологией. Возможно, это позволило бы избежать рассуждений о геометрических реализациях.}
\end{definition}

\begin{lemma}
  В условиях предыдущего определения $\mathcal{K}(j)$ --- гомотопическая эквивалентность.
\end{lemma}
\begin{proof}
  Дополним порядок на $X$ до линейного и занумеруем элементы в нём как $x_1,\ldots,x_n$.\\
  Пусть $X^r$ --- $r$-элементный начальный отрезок $X$ ($X$ конечно, значит, вполне упорядочено). Обозначим как $Y^r = Y \cup X^r \subseteq B(f)$ --- подмножество B(f) с индуцированным порядком, нигде не расширенным.\\
  Верно из соотношений, что $Y^r_{>x_r} = Y_{\geqslant f(x_r)}$ --- элементов $X$, больших $x_r$, в $Y^r$ нет, так как их нет в расширенном порядке, цепи $Y$ и $X$ сшиваются на границах соотношениями $f(x) \geqslant x$.\\
  Следовательно, $\mathcal{K}(Y^r_{>x_r}) = \mathcal{K}(Y_{\leqslant f(x_r)})$ --- конус с вершиной $f(x_r)$, следовательно, стягиваем.\\

  Применяя лемму 4 к $Y^r$ и элементу $x_r$, получаем, что вложение $Y^{r-1} \hookrightarrow Y_r$ --- гомотопическая эквивалентность.\\
  Существует цепочка вложений $Y^0 = Y \to Y^1 \to \ldots \to Y^n = B(f)$, композиция которой --- $j$, значит, по транзитивности, $\mathcal{K}(j)$ --- гомотопическая эквивалентность.
\end{proof}

\begin{proof}
  \textit{Доказательство теоремы Квиллена-Маккорда}\\
  Дополним порядок на $Y$ до линейного и занумеруем элементы в нём как $y_1,\ldots,y_m$.\\
  $Y^r$ --- дополнение к $r$-элементному начальному отрезку $Y$, $X^r = X \cup Y_r \subseteq B(f)$ --- снова подмножество с индуцированным порядком.\\
  Из соотношений $X^{r-1}_{<y_r} = X^{r-1}_{\leqslant f^{-1}{y_r}} = f^{-1}(Y_{\leqslant y_r})$.\\

  По предположению теоремы $\mathcal{K}(X^{r-1}_{<y_r}) = \mathcal{K}(f^{-1}(Y_{\leqslant y_r}))$ стягиваем.
  Применяя лемму 4 к $X^{r-1}$ и элементу $y_r$, получаем, что $X^r \hookrightarrow X^{r-1}$ --- гомотопическая эквивалентность.

  По построению цилиндра $i(x) \leqslant (j \circ f)(x)$ для всех $x$. По лемме 3 получаем, что $\mathcal{K}(i) = \mathcal{K}(j \circ f) = \mathcal{K}(j)\mathcal{K}(f)$. $\mathcal{K}(i)$ и $\mathcal{K}(j)$ --- гомотопические эквивалентности, следовательно, $\mathcal{K}(f)$ --- гомотопическая эквивалентность (например, умножим на $(\mathcal{K}(f))^{-1}$ слева).
\end{proof}

Предложенное доказательство можно обобщить для доказательства гомологической версии теоремы.\\
Утверждение гомологической версии слабее классического утверждения, следовательно, доказывать заново нужно только те леммы, в которых существенно используются условия теоремы.\\
Такая лемма единственна --- лемма 4.

\begin{lemma}
  \textit{Гомологический вариант леммы 4}\\
  Пусть $X$ --- конечное частично упорядоченное множество, $x \in X$ --- элемент такой, что или $\mathcal{K}(X_{>x})$, или $\mathcal{K}(X_{<x})$ ацикличен. Тогда вложение $\mathcal{K}(X\setminus \{x\}) \hookrightarrow \mathcal{K}(X)$ индуцирует изоморфизмы всех групп гомологий.
\end{lemma}
\begin{proof}
  Группы гомологий $lk(x) = K(X_{>v}) * K(X_{<v})$ тривиальны. Это следствие леммы 2.1 в статье [3].\\
  Точная последовательность Майера-Вьеториса, применённая к покрытию $K(X \setminus \{x\}) \cup st(x)$, доказывает лемму.
\end{proof}

Доказательство теоремы 2 повторяет доказательство теоремы 1 с заменой ссылки на лемму 4 в последнем доказательстве на ссылку на лемму 6.

\subsection*{5. Доказательство теоремы 3}

Приведём здесь утверждение леммы 2.1 из [5]:\\
\begin{lemma}
  $H_{r+1}(A * B) \simeq \bigoplus_{i+j=r}(H_i(A) \otimes H_j(B)) \oplus \bigoplus_{i+j=r-1} \operatorname{Tor}(H_i(A),H_j(B))$.\\
  Гомологии здесь рассматриваются приведённые с коэффициентами в области главных идеалов.
\end{lemma}

Аналог леммы 4 разбивается на два независимо доказываемых утверждения.\\

\begin{lemma}
  Пусть $X$ --- конечное частично упорядоченное множество, $x \in X$ --- элемент такой, что или $\mathcal{K}(X_{>x})$, или $\mathcal{K}(X_{<x})$ $m$-ацикличен.\\
  Тогда $lk(x) = \mathcal{K}(X_{>x}) * \mathcal{K}(X_{<x})$ $m$-ацикличен.
\end{lemma}
\begin{proof}
  Пусть для определённости в лемме 7 $B$ выбран $m$-ацикличным. Этот выбор произволен в силу коммутативности операции джойна.\\
  По линейности тензорного произведения из $m$-ацикличности $B$ следует $m$-тривиальность $H_i(A) \otimes H_j(B)$ для любых индексов.\\
  Из леммы 2 подмодули и фактормодули $m$-тривиальных модулей $m$-тривиальны.\\
  В комплексе $\ldots \to P_n \otimes B \to \ldots \to P_1 \otimes B \to 0$ все модули $m$-тривиальны, следовательно, все его гомологии, то есть $Tor_{\bullet}(A,B)$ $m$-тривиальны.\\
  Прямая сумма $m$-тривиальных модулей $m$-тривиальна, $m$-перемежения строятся покомпонентно. Следовательно, правая сторона выражения леммы 7 $m$-тривиальна, а значит, $m$-тривиальная и левая сторона, что и требовалось.
\end{proof}

\begin{lemma}
  Пусть $A \to B \xrightarrow{f} C \to D$ --- подпоследовательность точной последовательности, $A$ и $D$ $m$-тривиальны. Тогда $B$ и $C$ $2m$-перемежены.
\end{lemma}
\begin{proof}
  Из точности следует, что $\operatorname{Ker}(f)$ и $\operatorname{coKer}(f)$ $m$-тривиальны, следовательно, по приближённой транзитивности $2m$-перемежены. При этом $\operatorname{coIm}(f) \stackrel{f}{\simeq} \operatorname{Im}(f)$.\\
  $B = \operatorname{Ker}(f) \oplus \operatorname{coIm}(f)$; $C = \operatorname{coKer}(f) \oplus \operatorname{Im}(f)$.\\
  $2m$-перемежение $B$ и $C$ строится покомпонентно.
\end{proof}

\begin{lemma}
  \textit{Приближённый вариант леммы 4}\\
  Пусть $X$ --- конечное частично упорядоченное множество, $x \in X$ --- элемент такой, что или $\mathcal{K}(X_{>x})$, или $\mathcal{K}(X_{<x})$ $m$-ацикличен. Тогда вложение $\mathcal{K}(X\setminus \{x\}) \hookrightarrow \mathcal{K}(X)$ является гомологической $2m$-эквивалентностью.
\end{lemma}
\begin{proof}
  Лемма следует из лемм 8 и 9, в качестве точной последовательности в лемме 9 можно взять точную последовательность Майера-Вьеториса для того же разбиения, что и в лемме 6.
\end{proof}

Доказанных утверждений достаточно для построения доказательства теоремы 3.

\subsection*{6. Приложение: устойчивость в спектральных последовательностях}
Мы будем рассматривать ограниченные в каком-то направлении гомологические спектральные последовательности, расположенные в первом квадранте.\\
Расположение в первом квадранте: $p < 0 \lor q < 0 \implies E_r^{p,q} = 0$.\\
Ограниченность: $\exists p_0:\;\forall p>p_0,\,\forall q\; E_r^{p,q} = 0$ или $\exists q_0:\;\forall q>q_0,\,\forall p\; E_r^{p,q} = 0$.\\
Эти ограничения означают, что на какой-то странице все дифференциалы становятся нулевыми, поскольку их образы лежат за пределами квадранта, то есть нулевые. Значит, c некоторой страницы $n$ спектральная последовательность стабилизируется, т.е. $E_n = E_{\infty}$.\\
Гомологичность в этом контексте означает, что дифференциалы уменьшают сумму индексов.\\

\begin{lemma}
  Пусть все модули на $r$-й странице спектральной последовательности $m$-тривиальны. Тогда на $r+1$-й странице все модули $m$-тривиальны.
\end{lemma}
\begin{proof}
  Каждый модуль на $r+1$-й странице является модулем гомологий некоторого модуля с $r$-й страницы относительно дифференциалов $r$-й страницы. То есть он является фактор-модулем подмодуля $m$-тривиального модуля. Применяя дважды лемму 2, получаем, что он является фактор-модулем $m$-тривиального модуля, то есть $m$-тривиален.
\end{proof}

\begin{definition}
  Будем говорить, что спектральная последовательность сходится к набору модулей $A_{\bullet}$,
  если для любого $n$ на $A_n$ определена убывающая фильтрация $\ldots \hookrightarrow  F^pA \hookrightarrow F^{p-1}A \hookrightarrow \ldots \hookrightarrow F^0A = A$ и для каждого $n$ $E^{p,n-p} = F^{p-1}A/F^pA$.
\end{definition}

Заметим, что по определению ограниченная спектральная последовательность в первом квадранте может сходится только к набору модулей, на каждом из которых определена фильтрация с конечным числом ненулевых членов, что будем записывать как $0 = F^nA \hookrightarrow F^{n-1}A \hookrightarrow \ldots \hookrightarrow F^0A = A$.

\begin{lemma}
  Пусть $0 = F^nA \hookrightarrow F^{n-1}A \hookrightarrow \ldots \hookrightarrow F^0A = A$ --- фильтрация, при этом $\forall p\; F^pA/F^{p+1}A$ $m$-тривиален.\\
  Тогда $A$ $nm$-тривиален.
\end{lemma}

\begin{proof}
  $F^{n-1}A = F^{n-1}A/F^nA$, следовательно, $m$-тривиален.\\
  Далее индукция по номеру члена фильтрации.\\
  Пусть $F^{n-p}A$ $pm$-тривиален. $F^{n-(p+1)}A/F^{n-p}A$ $m$-тривиален по условию. Рассмотрим точную тройку $0 \to F^{n-p} \hookrightarrow F^{n-(p+1)} \rightarrow F^{n-(p+1)}A/F^{n-p}A \to 0$. По лемме 1 $F^{n-(p+1)}$ $pm+m=(p+1)m$-тривиален, что доказывает шаг индукции.\\
\end{proof}

Следствием Леммы 4 является следующее общее утверждение:
\begin{corollary}
  Если все модули на первой странице спектральной последовательности $m$-тривиальны и последовательность стабилизируется на $n$-й странице, последовательность сходится к набору $nm$-тривиальных модулей.
\end{corollary}

\end{document}
