\documentclass[a4paper, 12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage{amsmath,amssymb,amsthm}
\usepackage[a4paper,hmargin=2.5cm,vmargin=2.5cm]{geometry}
\usepackage[english,russian]{babel}

\newtheorem{proposition}{Proposition}
\newtheorem{lemma}{Lemma}
\newtheorem{corollary}{Corollary}
\newtheorem{statement}{Statement}
\newtheorem{theorem}{Theorem}

\theoremstyle{definition}
\newtheorem{definition}{Definition}
\newtheorem{example}{Example}

\newtheorem{property}{Property}

\theoremstyle{remark}
\newtheorem{remark}{Remark}

\newenvironment{pf}{\noindent\textbf{Proof.} ~ \par}{\qed}
\newcommand{\define}[1]{{\textit{#1}}}

\title{Approximate Homological Version of Quillen-McCord Theorem}
\author{Vitalii Guzeev, Anton Ayzenberg}

\begin{document}

\section{Abstract}

Combinatorial topology has recently been successfully applied to data analysis. One approach is to compute persistent homology groups of some filtered simplicial complex constructed by experimental data and try to classify some objects by them. However complexity of computation of persistent homology is high enough to limit practical usage of the approach.\\

There is a question of how to how to algorithmically construct simplicial complex with same persistent homology as initially given with smaller dimension. In this paper we prove Quillen-McCord theorem (Quillen fiber lemma) in the setting of persistent homology of simplicial complexes. We give constructive argument which can be used to algorithmically reduce simplicial complex to smaller one.

\section{Preliminaries}

\subsection{Definitions}

\subsubsection{Quillen-McCord theorem}

We start with a formulation of classical theorem and definitions used for it and then descend from general case to specific. General case is not necessary for understanding of the paper.\\

\begin{definition}
  Simplex category $\Delta$ is the category with objects --- nonempty linearly ordered sets of the form $[n] = \{0,1,\ldots,n\}$ with $n \geq 0$ and morphisms --- order-preserving functions.
\end{definition}

All morphisms in the simplex category are compositions of injective maps $\delta_i^n : \{0,1,\ldots,i-1,i+1\ldots,n\} \mapsto \{0,1,\ldots,i-1,i,i+1,\ldots,n\}$ and surjective maps $\sigma^n_i : \{0,1,\ldots,i,i+1,i+2\ldots,n\} \mapsto \{0,1,\ldots,i,i+1,\ldots,n\}$.

\begin{definition}
  Simplicial set $S$ is a contravariant functor $\Delta \to Set$. Objects of image of $S$ are called simplices, cardinality of a simplex is called a dimension of a simplex. We will identify $s$ with set of its simplices while keeping in mind general structure.
\end{definition}

Simplicial sets form a category under natural transformations (category of presheaves on $\Delta$).\\

\begin{definition}
  Simplicial set $S$ is called a simplicial complex if for any $s \in S$ s.t. $v \subset s$  $v \in s$ and $S$ is faithful.
\end{definition}

We will also use the following definition:

\begin{definition}
  Join $A \star B$ of simplicial complexes $A$ and $B$ is the simplicial complex with simplices --- all possible unions of simplices $a \in A$ and $b \in B$.
\end{definition}

\begin{definition}
  Functor $K : \Delta \to Top$ which maps simplices to geometric simplices of corresponding dimension and morphisms to inclusions of faces and restrictions to subcomplexes is called \define{geometric realization}.
\end{definition}

Let $C$ denote a category. We can construct the simplicial set called \define{nerve of category $C$} as follows:\\
Let objects of $C$ be the only 0-dimensional simplices. Then let all morphisms be 1-dimensional simplices, all composable pairs of morphisms be 2-dimensional simplices and so on.

\begin{definition}
  Geometric realization $BC$ of nerve of the category $C$ is called classifying space of $C$.
\end{definition}

\begin{definition}
  Let $f: C \to D$ be a functor. Then comma category $d \downarrow f$ of objects under $d \in D$ is a category with objects --- pairs $(s,i_s)$ of objects in $D$ and morphisms $i_s : d \to s$ and morphisms --- morphisms in $D$ commuting with $i_s$. \textit{This is not the most general form of the definition.}
\end{definition}

\begin{theorem} \textbf{Quillen A theorem}\\
  If $f: C \to D$ is a functor such that the classifying space $B(d \downarrow f)$ of the comma category $d \downarrow f$ is contractible for any object $d \in D$, then $f$ induces a homotopy equivalence $BC \to BD$.
\end{theorem}

Every poset can be viewed as a category in an obvious way with morphisms --- order-preserving maps. Nerve construction on a poset yields a simplicial complex called \define{order complex}. Application of Quillen A theorem to posets yields the following theorem:

\begin{theorem} \textbf{Quillen-McCord theorem}\\
  Assume $X, Y$ are finite posets, $f : X \to Y$ is order-preserving map.\\
  If $\forall y \in Y\;\mathcal{K}(f^{-1}(Y_{\leqslant y}))$ is contractible, then $\mathcal{K}f$ is a homotopy equivalence.\\
\end{theorem}

There holds simple {\cite[Theorem 1.2]{Bar11}} and homological {\cite[Corollary 5.5]{Bar11}} versions of this theorem:

\begin{theorem} \textbf{Simple Quillen-McCord theorem}\\
  Assume $X, Y$ are finite posets, $f : X \to Y$ is order-preserving map.\\
  If $\forall y \in Y\;\mathcal{K}(f^{-1}(Y_{\leqslant y}))$ is contractible, then $\mathcal{K}f$ is a simple homotopy equivalence.\\
\end{theorem}

\begin{theorem} \textbf{Homological Quillen-McCord theorem}\\
  Assume $X, Y$ are finite posets, $f : X \to Y$ is order-preserving map.\\
  If $\forall y \in Y\;\mathcal{K}(f^{-1}(Y_{\leqslant y}))$ is acyclic, $\mathcal{K}f$ induces isomorphisms of all homology groups.\\
\end{theorem}

Proofs of both theorems are necessary for construction of a desired result and will be recalled in section 2.3.

\subsubsection{Graded $\Bbbk[t]$-modules}

\subsection{Statement of the theorem}

\subsection{Prerequisite results}

\section{Results}

\subsection{Proof of the theorem}

\subsection{Optimizing complexity of the proof: approximate spectral sequences}

\section{References}

\begin{enumerate}
  \bibitem[Bar11]{Bar11}
  Jonathan Ariel Barmak. 2011.
  \newblock On Quillen’s Theorem A for posets.
  \newblock J. Comb. Theory Ser. A 118, 8 (November 2011), 2445–2453.
  \newblock DOI:https://doi.org/10.1016/j.jcta.2011.06.008
  \bibitem[GS16]{GS16}
  Govc, Dejan \& Skraba, Primoz. (2016).
  \newblock An Approximate Nerve Theorem. Foundations of Computational Mathematics.
  \newblock 10.1007/s10208-017-9368-6.
  \bibitem[Milnor56]{Milnor56}
  Milnor, J. (1956).
  \newblock Construction of Universal Bundles, II.
  \newblock Annals of Mathematics, 63(3), second series, 430-436.
  \newblock doi:10.2307/1970012
\end{enumerate}

\subsection*{3. Модули устойчивости и формулировка теоремы}
Рассмотрим кольцо многочленов $\mathbb{K}[t]$. При перемножении многочленов их степени складываются, значит, на этом кольце существует градуировка степенями, то есть моноидом неотрицательных целых чисел по сложению. $\mathbb{K}[t] = \bigoplus_{i \in \mathbb{Z}_{\geq 0}} \{f \in \mathbb{K}[t] | deg(f) = i\} = \mathbb{K}[t]_i$. В дальшейшем при упоминании кольца многочленов мы будет предполагать наличие такой градуировки.\\
\begin{definition}
  Модуль устойчивости --- градуированный модуль над градуированным кольцом многочленов $\mathbb{K}[t]$.\\
  Градуировка целыми числами задана следующим образом: $M = \bigoplus_{j \in \mathbb{Z}} M^j:\; \forall i \in \mathbb{Z}_{\geq 0}\, \mathbb{K}[t]_i \cdot M^j \in M^{j+i}$.
\end{definition}
\begin{definition}
  Пусть $M$, $N$ --- модули устойчивости, $f :: M \to N$ --- отображение такое, что $\forall j\, f(M^j) \in f(N^{j+m})$ для некоторого $m \in \mathbb{Z}_{\geq 0}$. Такое отображение будем называть $m$-морфизмом, в частности, 0-морфизм --- морфизм в категории градуированных $\mathbb{K}$-модулей.
\end{definition}
Пусть $M$ --- модуль устойчивости. Обозначим как $Id_m :: M \to M$ существующий для любого модуля $m$-морфизм $f(a) = t^ma$.\\
\begin{definition}
  Пусть $M$ и $N$ --- модули устойчивости, $m \in \mathbb{Z}_{\geq 0}$, $f :: M \to N$, $g :: N \to M$ --- $m$-морфизмы. Если $f \circ g = Id_{2m}$ и $g \circ f = Id_{2m}$, модули $M$ и $N$ называются $m$-перемежёнными, $f$ и $g$ называются $m$-перемежениями. Стоит отметить, что $0$-перемежение --- синоним слова <<изоморфизм>>.
\end{definition}
\begin{definition}
  Приближённым отношением эквивалентности будем называть бинарное отношение со следующими свойствами:
  \begin{itemize}
    \item $\forall M,m:\; M \stackrel{m}{\sim} M$ --- рефлексивность;\\
    \item $\forall M,N,m:\; M \stackrel{m}{\sim} N \iff N \stackrel{m}{\sim} M$ --- симметричность;\\
    \item $\forall M,N,K,m_1,m_2:\; M \stackrel{m_1}{\sim} N \land N \stackrel{m_2}{\sim} K \implies M \stackrel{m_1 + m_2}{\sim} K$ --- приближённая транзитивность.\\
  \end{itemize}
\end{definition}
\begin{proposition}
  $m$-перемежённость --- приближённое отношение эквивалентности.
\end{proposition}
\begin{proof}
  Рефлексивность и симметричность очевидны из определения.\\
  Приближённая транзитивность реализуется композицией реализующих отношение морфизмов $f_i, g_i$:\\
  $(f_2 \circ f_1) \circ (g_1 \circ g_2) = f_2 \circ (Id_{m_1}) \circ g_2 = Id_{m_1} \circ (Id_{m_2}) = Id_{m_1 + m_2}$, рассуждение в другую сторону симметрично.
\end{proof}
\begin{definition}
  Назовём $m$-тривиальным модуль, $m$-перемежённый с тривиальным модулем.
\end{definition}
В частности, из определения следует, что $\forall a\; t^{2m}a = 0$.
\begin{lemma}
  Пусть $0 \to M \xrightarrow{i} N \xrightarrow{p} P \to 0$ --- короткая точная последовательность, то есть $\operatorname{Ker}p = \operatorname{Im}i$.\\
  Тогда если $M$ $m_1$-тривиален и $P$ $m_2$-тривиален, $N$ $m_1 + m_2$-тривиален.
\end{lemma}
\begin{proof}
  Рассмотрим произвольный $b \in N$. $p(t^{2m_2} \cdot b) = t^{2m_2} \cdot c = 0$, следовательно, $t^{2m_2} \cdot b \in \operatorname{Im}i$. $i$ --- вложение, в частности из этого следует, что $\operatorname{Im}i \simeq M$, то есть $t^{2m_1} \cdot t^{2m_2} \cdot b = 0$, что и означает в силу произвольности $b$ $m_1+m_2$-тривиальность $N$.
\end{proof}
\begin{lemma}
  Пусть $0 \to M \xrightarrow{i} N \xrightarrow{p} P \to 0$ --- короткая точная последовательность.\\
  Тогда если $N$ $m$-тривиален, $M$ и $P$ $m$-тривиальны.
\end{lemma}
\begin{proof}
  $M$ изоморфен подмодулю $N$, а любой подмодуль $N$ $m$-тривиален, так как для любого его элемента $a$ выполнено $t^{2m} \cdot a = 0$ как для элемента $N$.\\
  В то же время пусть $p(a) = b$, тогда $p(t^{2m} \cdot a) = p(0) = 0 = t^{2m} \cdot b$. Из сюръективности $p$ следует $m$-тривиальность $P$.
\end{proof}
Пусть $X$ --- триангулированное топологическое пространство, на котором задана функция $X \to \mathbb{R}$ и фильтрация прообразами открытых лучей $[-\infty,a)$. Эта фильтрация строго монотонна. Очевидно, что умножение в образе сдвигает индекс фильтрации в пространстве. Следовательно, гомологии $H_n(X)$ образуют модуль устойчивости с градуированными факторами --- гомологиями членов фильтрации.
\begin{definition}
  Топологическое пространство (симплициальный комплекс) $X$ называется $m$-ацикличным, если $n \in \mathbb{Z}_{\geq 0} H_n(X,\mathbb{K})$ $m$-тривиален.
\end{definition}
\begin{definition}
  Если отображение топологических пространств $f :: X \to Y$ индуцирует $m$-перемежения на всех устойчивых модулях гомологий с коэффициентами в $\mathbb{K}$, $f$ называется гомологической $m$-эквивалентностью.
\end{definition}
Чтобы сформулировать целевую теорему, нужно ввести некоторую строго монотонную фильтрацию на порядковом комплексе частично упорядоченного множества.\\
Как минимум одна такая фильтрация уровнями функции существует --- функция на порядковом комплексе сопоставляет симплексу его размерность.\\
Улучшение этой фильтрации существенно для получения более содержательной формулировки теоремы.
\begin{theorem}
  \textbf{Приближённая версия теоремы 2.}\\
  Пусть $X, Y \in \operatorname{Ob}(PSet)$, $f \in \operatorname{Hom}(X,Y)$, на $X$ существует строго монотонная фильтрация.\\
  Если $\forall y \in Y\;\mathcal{K}(f^{-1}(Y_{\leqslant y}))$ $m$-ацикличен, $\mathcal{K}f$ является гомологической $2m$-эквивалентностью.\\
\end{theorem}

\subsection*{4. Доказательство теорем 1 и 2}

Авторство излагаемых в этой разделе доказательств принадлежит [1], но без их подробного изложения здесь не представляется возможным понятно изложить доказательство основной теоремы.\\

\begin{proposition}
  Джойн абстрактных симплициальных комплексов согласован с джойном их геометрических реализаций как топологических пространств, то есть $|K * L| = |K| * |L|$.\\
  В частности, на уровне геометрических реализаций джойн комплекса со стягиваемым комплексом стягиваем и, более общо, гомотопическая эквивалентность $K \simeq M$ влечёт $K * L \simeq M * L$.
\end{proposition}
Утверждение привожу без доказательства.\\

\begin{lemma}
  Пусть $f,g :: X \to Y$ --- морфизмы конечных чумов такие, что $f \leqslant g$ на всех симплексах. Тогда $\mathcal{K}(f)$ гомотопно $\mathcal{K}(g)$.
\end{lemma}
\begin{proof}
  Построим функцию $h_1 :: X \to Y$, совпадающую с $f$ на всех элементах, кроме любого максимального. На этом элементе пусть $h = g$. Это отображение, сохраняющее порядок. Аналогичное отображение $h_2$ можно построить для $h_1$ и $g$.
  Из конечности $X$ следует, что цепочка $h_0 = f \leqslant h_1 \leqslant \ldots \leqslant h_{n-1} \leqslant g = h_n$ конечна.

  Между $\mathcal{K}(h_i)$ и $\mathcal{K}(h_{i+1})$ существует линейная гомотопия --- образы $f$ и $g$ сравнимы. Значит, по транзитивности существует гомотопия $\mathcal{K}(f) ~ \mathcal{K}(g)$.
\end{proof}

Расширим одно из используемых обозначений ---  будем обозначать как $X_{op x}$ $\{x' \in X: x' op X\}$. $op \in \{<, \leqslant, >, \geqslant\}$.

\begin{proposition}
  Заметим, что $lk(v) = Ord(X_{>v}) * Ord(X_{<v})$ и, соответственно, $|lk(v)| = \mathcal{K}(X_{>v}) * \mathcal{K}(X_{<v})$.\\
  Также заметим, что $st(v) = lk(v) * v$, следовательно, $|st(v)| = |lk(v)| * |v|$ --- конус над вершиной $v$.
\end{proposition}

\begin{lemma}
  Пусть $X$ --- конечное частично упорядоченное множество, $x \in X$ --- элемент такой, что или $K(X_{>x})$, или $K(X_{<x})$ стягиваем. Тогда вложение $K(X\setminus\{x\}) \hookrightarrow \mathcal{K}(X)$ является гомотопической эквивалентностью.
\end{lemma}
\begin{proof}
  По условию и наблюдению $lk(x) = st(x) \cap K(X \setminus \{x\})$ стягиваем. Тогда вложение подкомплекса $lk(x) \to st(x)$ является слабой гомотопической эквивалентностью, так как $st(x)$ по наблюдению --- конус над $lk(x)$, следовательно, стягиваем. Это вложение является гомотопической эквивалентностью.\\
  Например, это следует из теоремы Уайтхеда, если ввести на комплексе точно соответствующую симплициальной клеточную структуру, в которой симплекс из $k$ элементов отображается в $k$-клетку, а вложение в композицию характеристических отображений.
\end{proof}

\begin{definition}
  Пусть $f :: X \to Y$ --- морфизм чумов. Назовём цилиндром $B(f)$ отображения $f$ чум, множество которого --- $X \coprod Y$, отношения порядка на $X$ и $Y$ сохраняются и добавляется набор соотношений $x \leqslant y$, если $f(x) \leqslant y$, в частности, $x \leqslant f(x)$ является единственным новым определяющим соотношением.\\
  Канонические вложения будем обозначать как $i :: X \to B(f)$ и $j :: Y \to B(f)$.
  \textit{Мы стараемся не говорить о цилиндре отображения множеств, снабжённых топологией Александрова, чтобы не перегружать конструкцию терминологией. Возможно, это позволило бы избежать рассуждений о геометрических реализациях.}
\end{definition}

\begin{lemma}
  В условиях предыдущего определения $\mathcal{K}(j)$ --- гомотопическая эквивалентность.
\end{lemma}
\begin{proof}
  Дополним порядок на $X$ до линейного и занумеруем элементы в нём как $x_1,\ldots,x_n$.\\
  Пусть $X^r$ --- $r$-элементный начальный отрезок $X$ ($X$ конечно, значит, вполне упорядочено). Обозначим как $Y^r = Y \cup X^r \subseteq B(f)$ --- подмножество B(f) с индуцированным порядком, нигде не расширенным.\\
  Верно из соотношений, что $Y^r_{>x_r} = Y_{\geqslant f(x_r)}$ --- элементов $X$, больших $x_r$, в $Y^r$ нет, так как их нет в расширенном порядке, цепи $Y$ и $X$ сшиваются на границах соотношениями $f(x) \geqslant x$.\\
  Следовательно, $\mathcal{K}(Y^r_{>x_r}) = \mathcal{K}(Y_{\leqslant f(x_r)})$ --- конус с вершиной $f(x_r)$, следовательно, стягиваем.\\

  Применяя лемму 4 к $Y^r$ и элементу $x_r$, получаем, что вложение $Y^{r-1} \hookrightarrow Y_r$ --- гомотопическая эквивалентность.\\
  Существует цепочка вложений $Y^0 = Y \to Y^1 \to \ldots \to Y^n = B(f)$, композиция которой --- $j$, значит, по транзитивности, $\mathcal{K}(j)$ --- гомотопическая эквивалентность.
\end{proof}

\begin{proof}
  \textit{Доказательство теоремы Квиллена-Маккорда}\\
  Дополним порядок на $Y$ до линейного и занумеруем элементы в нём как $y_1,\ldots,y_m$.\\
  $Y^r$ --- дополнение к $r$-элементному начальному отрезку $Y$, $X^r = X \cup Y_r \subseteq B(f)$ --- снова подмножество с индуцированным порядком.\\
  Из соотношений $X^{r-1}_{<y_r} = X^{r-1}_{\leqslant f^{-1}{y_r}} = f^{-1}(Y_{\leqslant y_r})$.\\

  По предположению теоремы $\mathcal{K}(X^{r-1}_{<y_r}) = \mathcal{K}(f^{-1}(Y_{\leqslant y_r}))$ стягиваем.
  Применяя лемму 4 к $X^{r-1}$ и элементу $y_r$, получаем, что $X^r \hookrightarrow X^{r-1}$ --- гомотопическая эквивалентность.

  По построению цилиндра $i(x) \leqslant (j \circ f)(x)$ для всех $x$. По лемме 3 получаем, что $\mathcal{K}(i) = \mathcal{K}(j \circ f) = \mathcal{K}(j)\mathcal{K}(f)$. $\mathcal{K}(i)$ и $\mathcal{K}(j)$ --- гомотопические эквивалентности, следовательно, $\mathcal{K}(f)$ --- гомотопическая эквивалентность (например, умножим на $(\mathcal{K}(f))^{-1}$ слева).
\end{proof}

Предложенное доказательство можно обобщить для доказательства гомологической версии теоремы.\\
Утверждение гомологической версии слабее классического утверждения, следовательно, доказывать заново нужно только те леммы, в которых существенно используются условия теоремы.\\
Такая лемма единственна --- лемма 4.

\begin{lemma}
  \textit{Гомологический вариант леммы 4}\\
  Пусть $X$ --- конечное частично упорядоченное множество, $x \in X$ --- элемент такой, что или $\mathcal{K}(X_{>x})$, или $\mathcal{K}(X_{<x})$ ацикличен. Тогда вложение $\mathcal{K}(X\setminus \{x\}) \hookrightarrow \mathcal{K}(X)$ индуцирует изоморфизмы всех групп гомологий.
\end{lemma}
\begin{proof}
  Группы гомологий $lk(x) = K(X_{>v}) * K(X_{<v})$ тривиальны. Это следствие леммы 2.1 в статье [3].\\
  Точная последовательность Майера-Вьеториса, применённая к покрытию $K(X \setminus \{x\}) \cup st(x)$, доказывает лемму.
\end{proof}

Доказательство теоремы 2 повторяет доказательство теоремы 1 с заменой ссылки на лемму 4 в последнем доказательстве на ссылку на лемму 6.

\subsection*{5. Доказательство теоремы 3}

Приведём здесь утверждение леммы 2.1 из [5]:\\
\begin{lemma}
  $H_{r+1}(A * B) \simeq \bigoplus_{i+j=r}(H_i(A) \otimes H_j(B)) \oplus \bigoplus_{i+j=r-1} \operatorname{Tor}(H_i(A),H_j(B))$.\\
  Гомологии здесь рассматриваются приведённые с коэффициентами в области главных идеалов.
\end{lemma}

Аналог леммы 4 разбивается на два независимо доказываемых утверждения.\\

\begin{lemma}
  Пусть $X$ --- конечное частично упорядоченное множество, $x \in X$ --- элемент такой, что или $\mathcal{K}(X_{>x})$, или $\mathcal{K}(X_{<x})$ $m$-ацикличен.\\
  Тогда $lk(x) = \mathcal{K}(X_{>x}) * \mathcal{K}(X_{<x})$ $m$-ацикличен.
\end{lemma}
\begin{proof}
  Пусть для определённости в лемме 7 $B$ выбран $m$-ацикличным. Этот выбор произволен в силу коммутативности операции джойна.\\
  По линейности тензорного произведения из $m$-ацикличности $B$ следует $m$-тривиальность $H_i(A) \otimes H_j(B)$ для любых индексов.\\
  Из леммы 2 подмодули и фактормодули $m$-тривиальных модулей $m$-тривиальны.\\
  В комплексе $\ldots \to P_n \otimes B \to \ldots \to P_1 \otimes B \to 0$ все модули $m$-тривиальны, следовательно, все его гомологии, то есть $Tor_{\bullet}(A,B)$ $m$-тривиальны.\\
  Прямая сумма $m$-тривиальных модулей $m$-тривиальна, $m$-перемежения строятся покомпонентно. Следовательно, правая сторона выражения леммы 7 $m$-тривиальна, а значит, $m$-тривиальная и левая сторона, что и требовалось.
\end{proof}

\begin{lemma}
  Пусть $A \to B \xrightarrow{f} C \to D$ --- подпоследовательность точной последовательности, $A$ и $D$ $m$-тривиальны. Тогда $B$ и $C$ $2m$-перемежены.
\end{lemma}
\begin{proof}
  Из точности следует, что $\operatorname{Ker}(f)$ и $\operatorname{coKer}(f)$ $m$-тривиальны, следовательно, по приближённой транзитивности $2m$-перемежены. При этом $\operatorname{coIm}(f) \stackrel{f}{\simeq} \operatorname{Im}(f)$.\\
  $B = \operatorname{Ker}(f) \oplus \operatorname{coIm}(f)$; $C = \operatorname{coKer}(f) \oplus \operatorname{Im}(f)$.\\
  $2m$-перемежение $B$ и $C$ строится покомпонентно.
\end{proof}

\begin{lemma}
  \textit{Приближённый вариант леммы 4}\\
  Пусть $X$ --- конечное частично упорядоченное множество, $x \in X$ --- элемент такой, что или $\mathcal{K}(X_{>x})$, или $\mathcal{K}(X_{<x})$ $m$-ацикличен. Тогда вложение $\mathcal{K}(X\setminus \{x\}) \hookrightarrow \mathcal{K}(X)$ является гомологической $2m$-эквивалентностью.
\end{lemma}
\begin{proof}
  Лемма следует из лемм 8 и 9, в качестве точной последовательности в лемме 9 можно взять точную последовательность Майера-Вьеториса для того же разбиения, что и в лемме 6.
\end{proof}

Доказанных утверждений достаточно для построения доказательства теоремы 3.

\subsection*{6. Приложение: устойчивость в спектральных последовательностях}
Мы будем рассматривать ограниченные в каком-то направлении гомологические спектральные последовательности, расположенные в первом квадранте.\\
Расположение в первом квадранте: $p < 0 \lor q < 0 \implies E_r^{p,q} = 0$.\\
Ограниченность: $\exists p_0:\;\forall p>p_0,\,\forall q\; E_r^{p,q} = 0$ или $\exists q_0:\;\forall q>q_0,\,\forall p\; E_r^{p,q} = 0$.\\
Эти ограничения означают, что на какой-то странице все дифференциалы становятся нулевыми, поскольку их образы лежат за пределами квадранта, то есть нулевые. Значит, c некоторой страницы $n$ спектральная последовательность стабилизируется, т.е. $E_n = E_{\infty}$.\\
Гомологичность в этом контексте означает, что дифференциалы уменьшают сумму индексов.\\

\begin{lemma}
  Пусть все модули на $r$-й странице спектральной последовательности $m$-тривиальны. Тогда на $r+1$-й странице все модули $m$-тривиальны.
\end{lemma}
\begin{proof}
  Каждый модуль на $r+1$-й странице является модулем гомологий некоторого модуля с $r$-й страницы относительно дифференциалов $r$-й страницы. То есть он является фактор-модулем подмодуля $m$-тривиального модуля. Применяя дважды лемму 2, получаем, что он является фактор-модулем $m$-тривиального модуля, то есть $m$-тривиален.
\end{proof}

\begin{definition}
  Будем говорить, что спектральная последовательность сходится к набору модулей $A_{\bullet}$,
  если для любого $n$ на $A_n$ определена убывающая фильтрация $\ldots \hookrightarrow  F^pA \hookrightarrow F^{p-1}A \hookrightarrow \ldots \hookrightarrow F^0A = A$ и для каждого $n$ $E^{p,n-p} = F^{p-1}A/F^pA$.
\end{definition}

Заметим, что по определению ограниченная спектральная последовательность в первом квадранте может сходится только к набору модулей, на каждом из которых определена фильтрация с конечным числом ненулевых членов, что будем записывать как $0 = F^nA \hookrightarrow F^{n-1}A \hookrightarrow \ldots \hookrightarrow F^0A = A$.

\begin{lemma}
  Пусть $0 = F^nA \hookrightarrow F^{n-1}A \hookrightarrow \ldots \hookrightarrow F^0A = A$ --- фильтрация, при этом $\forall p\; F^pA/F^{p+1}A$ $m$-тривиален.\\
  Тогда $A$ $nm$-тривиален.
\end{lemma}

\begin{proof}
  $F^{n-1}A = F^{n-1}A/F^nA$, следовательно, $m$-тривиален.\\
  Далее индукция по номеру члена фильтрации.\\
  Пусть $F^{n-p}A$ $pm$-тривиален. $F^{n-(p+1)}A/F^{n-p}A$ $m$-тривиален по условию. Рассмотрим точную тройку $0 \to F^{n-p} \hookrightarrow F^{n-(p+1)} \rightarrow F^{n-(p+1)}A/F^{n-p}A \to 0$. По лемме 1 $F^{n-(p+1)}$ $pm+m=(p+1)m$-тривиален, что доказывает шаг индукции.\\
\end{proof}

Следствием Леммы 4 является следующее общее утверждение:
\begin{corollary}
  Если все модули на первой странице спектральной последовательности $m$-тривиальны и последовательность стабилизируется на $n$-й странице, последовательность сходится к набору $nm$-тривиальных модулей.
\end{corollary}

\end{document}
