\documentclass[english,12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage{amsmath,amssymb,amsthm}
\usepackage[a4paper,hmargin=2.5cm,vmargin=2.5cm]{geometry}
\usepackage[english]{babel}
\usepackage{tikz-cd}
\usepackage{enumitem}

\newcounter{stmcounter}[section]
\newcounter{thcounter}

\numberwithin{equation}{section}
\renewcommand{\thestmcounter}{\thesection.\arabic{stmcounter}}

\newtheorem{proposition}[stmcounter]{Proposition}
\newtheorem{lemma}[stmcounter]{Lemma}
\newtheorem{corollary}[stmcounter]{Corollary}
\newtheorem{statement}[stmcounter]{Statement}
\newtheorem{theorem}[thcounter]{Theorem}

\theoremstyle{definition}
\newtheorem{definition}[stmcounter]{Definition}
\newtheorem{property}[stmcounter]{Property}

\theoremstyle{remark}
\newtheorem{remark}[stmcounter]{Remark}
\newtheorem{example}[stmcounter]{Example}

% \newenvironment{pf}{\noindent\textbf{Proof.} ~ \par}{\qed}
\newenvironment{pf}{\noindent\textbf{Proof.}}{\qed}
\newcommand{\define}[1]{{\textit{#1}}}

\renewcommand{\leq}{\leqslant}
\renewcommand{\geq}{\geqslant}

\begin{document}

% \title{Approximate Homological Version of Quillen-McCord Theorem}
% \author{V. Guzeev, A. Ayzenberg}

%%
%% Title page
%%
\begin{center}
{\scshape Federal State Autonomous Educational Institution\\
for the Higher Education\\
National Research University ``Higher School of Economics''\\[1ex]
Faculty of Mathematics\par}

\par\vfill


\textbf{\large Project Proposal}

\vspace{1cm}

{\Large\bfseries
Quillen-McCord theorem and homological persistence in categories of functors\\
\vspace{0.5cm}
Теорема Квиллена-МакКорда и гомологическая устойчивость в категориях функторов\par}

\vspace{3cm}

\begin{flushright}
\large Student: Vitalii Guzeev\\
\vspace{0.5cm}
\large Scientific advisor: Anton Ayzenberg, Candidate of Sciences
\end{flushright}

\par\vfill\vfill
\textbf{\large Moscow 2023}
\end{center}
\thispagestyle{empty}
\pagebreak
\pagenumbering{arabic}
%%
%% ===========================================================================
%%

\begin{abstract}
Quillen-McCord theorem gives a sufficient condition on a map between classifying spaces of posetal categories to be homotopy equivalence. Jonathan Ariel Barmak in his paper ({\cite{Bar11}}) gives an elementary topological proof and proves a homological version of the theorem.

We formulate and prove the homological Quillen-McCord theorem in the setting of persistent homology using the technique of interleaving distances (according to {\cite{GS16}}) and generalized persistence theorem ({\cite{Corbet18}}). To establish the technique we introduce persistence objects as objects in appropriate functor categories and prove several results, e.g. order extension principle for objects in Fun(I, Pos) and approximate triviality of left derived functors of approximately trivial objects in Fun(I, R-Mod).

Since the given proof gives explicit Lipschitz constant for the map of persistence classifying spaces, we expect this result to be useful in TDA for reducing the complexity of experimental data.
\end{abstract}

% \maketitle

\section{Introduction}

In topological data analysis, there is a standard invariant known as persistent homology. It can be roughly introduced as the homology of a filtered chain complex, proper definitions are left for preliminaries. Since the whole field is devoted to applications, researchers are frequently faced with the problem of computing persistent homology of complexes, constructed from experimental data. These computations can require lots of computational resources.\\

Hence there is a natural problem --- how to construct a filtered chain complex with persistent homology equal to given or similar to them. Since experimental data always come with an error and experiment reproducibility criteria never require an exact match of the results, it's necessary to introduce the notion of similarity between complexes or at least their homology.\\

We investigate the problem from the theoretical angle by constructing an approximate theorem analogous to Quillen's A theorem for posetal categories. The theorem is technically complex and is given at the beginning of the main results section. We do not give an algorithm based on the theorem. However, such an algorithm would be a vast improvement of the result and is a possible direction of further work.\\

Experimental setting which was minded during the work --- observation of some dynamic structure, which is represented by some chain complex at any moment, in some time frame.\\

The proposal is structured as follows.
\begin{enumerate}
  \setcounter{enumi}{1}
  \item In preliminaries we give an outline of well-known notions used throughout the proposal.
  \begin{enumerate}[label*=\arabic*.]
    \item First preliminary subsection is devoted to a notion of interleaving distance (according to {\cite{GS16}}) which fits as a required measure of similarity between persistent homology modules and hence between complexes. Usability of this notion is guaranteed by persistence theorem {\cite{Zomorodian05}}. We try to keep some level of generality, in particular, we work with a generalized version of the theorem proven in {\cite{Corbet18}} and formulate it. This generality is necessary for applications and allows us to operate both discrete and continuous models of time in an experiment.
    \item Second subsection gives a classical formulation of the Quillen-McCord theorem and necessary definitions, mostly in a combinatorial manner. In order to give an abstract context in which the general Quillen A theorem {\cite{Quillen72}} is used, we derive it from the general theorem. Additionally, we outline Barmak's ({\cite{Bar11}}) proofs of classical and homological versions of the theorem.
  \end{enumerate}
  \item In the apparatus section we systematize and sometimes introduce various results forming the toolchain to prove the target theorem. Its necessary set of definitions is close to well-established in a field (for instance, {\cite{Bubenik15}}), but the whole toolchain is independent.
  \begin{enumerate}[label*=\arabic*.]
    \item At first, we reformulate several preliminary definitions in terms of functor categories and transfer some notions, e.g. classifying space of a category and covering, to appropriate functor categories.
    \item In the second section we formulate and prove the linear extension principle for functors to the category of posets. We give both finite and general versions with an AC-dependent proof of the latter.
    \item At the end of the section we give some technical stability results concerning objects of appropriate functor categories.
  \end{enumerate}
  \item Finally, we formulate and prove the main result --- stable (w.r.t. interleaving distances) homological Quillen-McCord theorem. We adapt a proof given in ({\cite{Bar11}}) using developed apparatus.
\end{enumerate}

Since the whole text is a research proposal, we give possible directions of research alongside with established results.

\section{Preliminaries}

\subsection{Persistence modules and interleaving distance}

The initial definition is the following.

\begin{definition} {\cite[Definition 3.1]{Zomorodian05}}\\
  \define{Persistence complex} is a family of chain complexes $C_{\star}^{0} \xrightarrow{f_0} C_{\star}^{1} \xrightarrow{f_1} C_{\star}^{2} \xrightarrow{f_2} \ldots$ where $f_i$ are the chain maps. We call the maps $f=(\ldots,f_i,\ldots)$ the \define{structure maps} of a persistence complex.
\end{definition}

\begin{definition}
  Let $R$ be a ring. \define{Persistence module} is a family of $R$-modules $M^i$ with homomorphisms $\phi_i : M^i \to M^{i+1}$ as the structure maps.
\end{definition}

An example of a persistence module is given by homology modules of persistence complex $C_{\star}$ (\define{persistent homology}). We set $H_i^j(C_{\star}) := H_i(C_{j})$, maps $\phi_j$ are induced by $f_i$.\\

\begin{definition}
  Persistence complex (module) is of \define{finite type} over $R$ if all components of complexes (modules) are finitely generated as $R$-modules and all $f_i$ ($\phi_i$) are isomorphisms for $i > m$ for some $m$.
\end{definition}

\begin{definition}
  Persistence complex (module) is of \define{finitely presented type} over $R$ if all components of complexes (modules) are finitely presented as $R$-modules and all $f_i$ ($\phi_i$) are isomorphisms for $i > m$ for some $m$.
\end{definition}

Note that by construction homology of a complex of finite type is a module of finite type. It follows from the fact that the quotient of a finitely generated module by the finitely generated module is finitely generated. The analogous statement fails for complexes of finitely presented type.\\

\begin{definition}
  Assume $I$ is a semigroup. Then \define{graded module} over $I$-graded ring $R$ is an $R$-module $M$ together with a decomposition $M = \bigoplus_{j \in I} M^j:\; \forall i \in I\, R_i \cdot M^j \subset M^{j+i}$
\end{definition}

Graded modules over $R$ form a category. Maps $\phi$ between modules $M$ and $N$ such that $\phi(M^j) \subset N^j$ for all $j$ in the indexing set are morphisms in this category.\\

There is a well-known theorem.

\begin{theorem} {\cite[Theorem 3.1]{Zomorodian05}}\\
  The category of persistence modules of finite type over Noetherian ring with unity $R$ is equivalent to the category of graded finitely generated $R[t]$-modules.
\end{theorem}

It is proven in {\cite{Corbet18}}. The authors provide a generalization that is more suitable for our needs.\\

\begin{definition}
  Let $(G,\star)$ be a commutative monoid and $g_1, g_2 \in G$.
  We say that $g_1 \preceq g_2$ if $\exists h \in G:\; h \star g_1 = g_2$, $h$ is not a neutral element.
\end{definition}

\begin{definition} {following \cite[Definition 11]{Corbet18}}
  Monoid $(G,\star)$ is called \define{good} if the following hold.
  \begin{itemize}
    \item $(G, \star)$ is commutative;
    \item $g_1 \star g_2 = g_1 \star g_3$ implies $g_2 = g_3$ (cancellation);
    \item $g_1 \preceq g_2$ and $g_2 \preceq g_1$ imply $g_1 = g_2$ (anti-symmetricity);
    \item For any finite $H \subseteq G$ there exists at most finitely many distinct elements (cm, common multiples) $m$ such that $\forall h \in H:\; h \preceq m$ and there is no common multiple $m_1 \prec m$ satisfying cm (pl, partially least) (property of being weak plcm).
  \end{itemize}
\end{definition}

\begin{definition} {\cite[Definition 12]{Corbet18}}
  Let $R$ be a ring and $G$ be a good monoid. \define{(Generalized) persistence module} is a family of $R$-modules $M^i$ with homomorphisms $\phi_{ij} : M^i \to M^{j}$ satisfying $\phi_{ii} = Id$ and relation $\phi_{ij} \circ \phi_{jk} = \phi_{ik}$ for any $i < j < k \in G$ as the structure maps.
\end{definition}

\begin{theorem} {\cite[Theorem 21]{Corbet18}}\\
  Let $R$ be a ring with unity and $G$ be a good monoid. Then the category of finitely presented graded $R[G]$-modules is isomorphic to the category of $G$-indexed persistence modules over $R$ of finitely presented type.
\end{theorem}

\begin{definition} {\cite[Definition 2.7]{GS16}}\\
  Let $M$ and $N$ be graded $R[G]$-modules, $f : M \to N$ be a homomorphism of modules. Then $f$ is called \define{$\varepsilon$-morphism} if $f(M^j) \subset N^{j+\varepsilon}$.
\end{definition}

\begin{remark}
  Note that $0$-morphism is a morphism in the category of graded modules over $R[G]$.
\end{remark}

\begin{remark}
  Cancellative commutative monoid with $\preceq$ being a total order (totally ordered) is good.
\end{remark}

\begin{definition}
  We shall call cancellative commutative totally ordered monoids \define{very good}.
\end{definition}

\begin{example}
  Consider the monoid of non-negative real numbers $\mathbb{R}_{\geq 0}$ with addition as a monoidal operation. The addition of real numbers is cancellative and $\preceq$ is a total order. This monoid is very good.\\

  For contrast, we can consider $\mathbb{R}$. Since $g_1 = h + g_2$ implies $g_2 = (-h) + g_1$ $\preceq$ is trivial and $R$ is not a good monoid in sense of the given definition.
\end{example} ~ \par

\begin{remark} ~ \par
  Our basic examples are given by considering Theorem 2 with $G$ being either $(\mathbb{R}_{\geq 0},+)$ or $(\mathbb{N}_0,+)$. These examples represent continuous and discrete time in observation of some dynamic structure.\\

  All techniques we describe are applicable for static data, e.g. for Čech complexes.\\
\end{remark}

We shall use the multiplicative notation for monoids for compatibility with references in further constructions. This notation is inspired by standard notation in polynomial ring $R[t]$ which is a monoid ring over a free monoid on a single generator $t$.

\begin{proposition}
  Let $\mathbb{R}$ be a ring with unity and $G$ be a very good monoid. Then for any graded $R[G]$-module $M$ and any $\varepsilon \in \mathbb{G}$ there exists morphism $Id_{\varepsilon}(a) = t^{\varepsilon}a$, where $t$ is a successor of identity.
\end{proposition}

\begin{definition}
  Graded modules $M$ and $N$ are called \define{$\varepsilon$-interleaved} ($M \stackrel{\varepsilon}{\sim} N$) if there exists a pair of $\varepsilon$-morphisms $(\phi : M \to N,\;\psi : N \to M)$ (\define{$\varepsilon$-interleaving}) such that $\phi \circ \psi = Id_{2\varepsilon} : N \to N$ and $\psi \circ \phi = Id_{2\varepsilon} : M \to M$.\\
\end{definition}

\begin{remark}
  There follows that $M \stackrel{\varepsilon}{\sim} N$ implies $M \stackrel{\alpha}{\sim} N$ for any $\alpha > \varepsilon$ since for $\varepsilon$-interleaving $(\phi, \psi)$ we have $\alpha$-interleaving $(Id_{\alpha - \varepsilon} \circ \phi, Id_{\alpha - \varepsilon} \circ \psi)$.
\end{remark}

\begin{definition}
  We denote as \define{$\varepsilon$-equivalence} relation with the following properties.\\
  For any $M$, $N$, $L$, $\varepsilon$, $\varepsilon_1$, $\varepsilon_2$
  \begin{itemize}
    \item $M \stackrel{0}{\sim} M$.
    \item $M \stackrel{\varepsilon}{\sim} N$ is equivalent to $N \stackrel{\varepsilon}{\sim} M$.
    \item if $M \stackrel{\varepsilon_1}{\sim} N$ and $N \stackrel{\varepsilon_2}{\sim} L$ then $M \stackrel{\varepsilon_1 + \varepsilon_2}{\sim} L$.
  \end{itemize}
\end{definition}

\begin{proposition}
  $\varepsilon$-interleaved graded modules are $\varepsilon$-equivalent.
\end{proposition}

\begin{proposition} {\cite[Proposition 2.13]{GS16}}
  \label{epstriv}
  Condition $M \stackrel{\varepsilon}{\sim} 0$ is equivalent to condition $t^{2\varepsilon}M = 0$.
\end{proposition}

\begin{definition}
  Any $\varepsilon$-equivalence induces an extended pseudometric on its domain. This pseudometric is defined as $d(X,Y) = min\{\varepsilon \in I\;|\;X \stackrel{\varepsilon}{\sim} Y\}$. For graded modules, this pseudometric is called interleaving distance. {\cite[Definition 2.12]{GS16}}\\
  We shall refer to this general pseudometric as approximation distance since we do not want to overload the term, however, we do not give another example except for interleaving distance. For a deeper evaluation of this construction see {\cite{deSilva18}}.
\end{definition}

\begin{lemma}
  \label{ops}
  Let $0 \to M \to L \to N \to 0$ be a short exact sequence of non-negatively graded modules. Then the following properties hold.
  \begin{itemize}
    \item If $M \stackrel{\varepsilon_1}{\sim} 0$ and $N \stackrel{\varepsilon_2}{\sim} 0$ then $L \stackrel{\varepsilon_1 + \varepsilon_2}{\sim} 0$. {\cite[Proposition 4.6]{GS16}}
    \item If $L \stackrel{\varepsilon}{\sim} 0$ then $M \stackrel{\varepsilon}{\sim} 0$ and $N \stackrel{\varepsilon}{\sim} 0$.
    \item If $M \stackrel{\varepsilon}{\sim} 0$ then $L \stackrel{2\varepsilon}{\sim} N$. {\cite[Proposition 4.1]{GS16}}
    \item If $N \stackrel{\varepsilon}{\sim} 0$ then $M \stackrel{2\varepsilon}{\sim} L$. {\cite[Proposition 4.1]{GS16}}
  \end{itemize}
\end{lemma}

\begin{pf}
  The second statement of the lemma requires proof. Denote non-trivial maps in s.e.s as $i$ and $q$.\\

  Then $i(t^{2\varepsilon}a) = t^{2\varepsilon}i(a) = 0$ for any $a \in M$. $i$ is injective. Hence by Proposition \ref{epstriv} $M \stackrel{\varepsilon}{\sim} 0$.\\

  On the other side $0 = q(t^{2\varepsilon}a) = t^{2\varepsilon}q(a)$ where $q$is surjective. Hence $N \stackrel{\varepsilon}{\sim} 0$.
\end{pf}

\subsubsection{Proposed improvements}

There is a possible direction of research branching out from the results mentioned in the subsection.

\begin{definition}
  Let $M = \{e\} \cup N \cup P$ be a monoid with neutral element $e$ and a split to sets $N$ and $P$ such that $N \cap P = \emptyset$ and both $N \cup \{e\}$ and $P \cup \{e\}$ are closed under monoidal operation. Then we call $M$ an \define{orientable monoid}. An orientable monoid with the fixed subset $P$ is called oriented.
\end{definition}

\begin{definition}
  Let $(G,P,\star)$ be an oriented commutative monoid and $g_1, g_2 \in G$.
  We say that $g_1 \preccurlyeq g_2$ if $\exists h \in P:\; h \star g_1 = g_2$.
\end{definition}

One can analogously construct the notion of oriented good monoid and oriented persistence modules replacing $\preceq$ with $\preccurlyeq$ in required definitions. We expect a version of Theorem 2 to hold for categories of oriented persistence modules indexed by oriented good monoid $M$ and non-negatively graded $R[M]$-modules.

\subsection{Quillen-McCord theorem}

The series of definitions necessary to formulate Quillen's A theorem starts with the definition of a simplicial set.

% FIXME: link to ncatlab.
\begin{definition}
  \define{Simplicial set} is the following collection of data:
  \begin{itemize}
     \item for each natural $n$ a set $X_n$ of $n$-simplices --- subsets on $\mathbb{N}$ of cardinality $n$ isomorphic as ordered sets to initial segment $[n]$ of $\mathbb{N}$ of length $n$;
     \item for each injective map $\delta_i : [n-1] \to [n]$ a function $d_i: X_n \to X_{n-1}$ – the $i$-th face map on $n$-simplices;
     \item for each surjective map $\sigma_i : [n+1] \to [n]$ a function $s_i : X_n \to X_{n+1}$ – the $i$-th degeneracy map on $n$-simplices.
  \end{itemize}

  These functions must obey so-called simplicial identities. I.e.
  \begin{itemize}
    \item $d_i \circ d_j = d_{j-1} \circ d_i$ if $i < j$;
    \item $s_i \circ s_j = s_j \circ s_{i-1}$ if $i > j$;
    \item $d_i \circ s_j = s_{j-1} \circ d_i$ if $i < j$;
    \item $d_i \circ s_j = Id$ if $i = j$ or $i = j + 1$;
    \item $d_i \circ s_j = s_j \circ d_{i-1}$ if $i > j + 1$;
  \end{itemize}
\end{definition}

\begin{proposition}
  Simplicial sets form the category $sSet$.
\end{proposition}

\begin{definition}
  Let $X$ be a simplicial set and $x \in X_n$ --- its arbitrary $n$-simplex. Consider the powerset $\mathcal{P}(x)$ of $x$. If for any simplex $x$ any element $y \in \mathcal{P}(x)$ of cardinality $k$ satisfies $y \in X_k$, $X$ is called a simplicial complex.
\end{definition}

\begin{definition}
  \define{Join} $A \star B$ of simplicial complexes $A$ and $B$ is the simplicial complex with simplices --- all possible unions of simplices $a \in A$ and $b \in B$.
\end{definition}

Let $A$ be a simplicial complex.

\begin{definition}
  \define{Star} $\operatorname{st}(x)$ of simplex $x \in A$ is the minimal by inclusion simplicial complex containing all simplices $a \in A$ such that there exists inclusion $x \hookrightarrow a$.
\end{definition}

\begin{definition}
  \define{Link} $\operatorname{lk}(x)$ of simplex $x \in A$ is defined as follows: $\operatorname{lk}(x) = \{v \in \operatorname{st}(x)|\; x \not\in v\}$.
\end{definition}

\begin{proposition}
  $\operatorname{st}(x) = \operatorname{lk}(x) \star x$.
\end{proposition}

\begin{definition}
  Functor $\left|\right| : sSet \to Top$ which maps $n$-simplices to geometric $n$-simplices and morphisms to inclusions of faces and restrictions to them is called standard \define{geometric realization}.
\end{definition}

\begin{definition}
  \define{Join} of topological spaces $A$ and $B$ is defined as follows: $A \star B\ := A \sqcup_{p_0} (A \times B \times [0,1]) \sqcup_{p_1} B$, where $p$ are projections of the cylinder $A \times B \times [0,1]$ onto faces.
\end{definition}

The next proposition gives motivation for the definition of a join of simplicial complexes.

\begin{proposition}
  $\left|A \star B\right| = \left|A\right| \star \left|B\right|$. Hence $\left|\operatorname{st}(x)\right|$ is a cone over $\left|x\right|$.
\end{proposition}

\begin{definition}
  Let $\mathcal{C}$ be a small category. Then we can functorially (w.r.t. to category $Cat$) assign a simplicial set $\mathcal{N}(\mathcal{C})$ called \define{nerve of a category} to it.\\

  Construction goes as follows:
  \begin{itemize}
    \item we assign to each object of $\mathcal{C}$ a $0$-simplex and to each morphism in $\mathcal{C}$ a $1$-simplex;
    \item then we take the set of all morphisms as an alphabet and write all words in it with no relations. We assign an $l$-simplex to a word of length $l$. Obviously, each commutative triangle $f, g, h = f \circ g$ in $\mathcal{C}$ gives rise to two morphisms between these words --- one is replacing $h$ with $f \circ g$ and maps to a face map, another replaces $f \circ g$ with $h$ and maps to a degeneracy map.
  \end{itemize}

   One can check that the constructed object is a simplicial set.
\end{definition}

\begin{definition}
  Geometric realization $B\mathcal{C}$ of $\mathcal{N}(\mathcal{C})$ is called \define{classifying space} of $\mathcal{C}$.\\

  We denote the composition of nerve and geometric realization as $\mathcal{B}$. It is a composition of functors, hence a functor. By definition $\mathcal{B}(\mathcal{C}) = B\mathcal{C}$ and we prefer notation $\mathcal{B}(f)$ to $Bf$.
\end{definition}

\begin{definition}
  Let $f: \mathcal{C} \to \mathcal{D}$ be a functor and $d$ --- object in $\mathcal{D}$. Then \define{comma category} $d \downarrow f$ is a category with objects --- pairs $(s,i_s)$ of objects in $\mathcal{C}$ and morphisms $i_s : d \to f(s)$ and morphisms --- morphisms $g$ in $\mathcal{C}$ such that triangle $i_s, i_{g(s)}, f(g)$ is commutative.
\end{definition}

\begin{theorem} {\cite[Theorem A]{Quillen72}}\\
  If $f: C \to D$ is a functor such that the classifying space $B(d \downarrow f)$ of the comma category $d \downarrow f$ is contractible for any object $d \in D$, then $f$ induces a homotopy equivalence $BC \to BD$.
\end{theorem}

The nerve construction on a posetal category yields a simplicial complex called \define{order complex}. Application of Quillen A theorem to posets yields the following theorem (we identify poset with its posetal category).

\begin{theorem} \textbf{Quillen-McCord theorem}\\
  Assume $X, Y$ are finite posets, $f : X \to Y$ is an order-preserving map.\\
  If $\forall y \in Y\;\mathcal{B}(f^{-1}(Y_{\leqslant y}))$ is contractible, then $\mathcal{B}f$ is a homotopy equivalence between $BX$ and $BY$.\\
\end{theorem}

\begin{theorem} \textbf{Homological Quillen-McCord theorem} {\cite[Corollary 5.5]{Bar11}}\\
  Assume $X, Y$ are finite posets, $f : X \to Y$ is an order-preserving map, $R$ is a PID.\\
  If $\forall y \in Y\;H_i(\mathcal{B}(f^{-1}(Y_{\leqslant y})),R) = 0$ for any $i$, $\mathcal{B}f$ induces isomorphisms of all homology groups with coefficients in $R$ on $BX$ and $BY$.\\
\end{theorem}

Proofs of both theorems are necessary to understand the proposal and we recall them in brief.

\subsubsection{Barmak's proof of Quillen-McCord theorem}

\begin{proposition} {\cite[Proposition 2.1]{Bar11}}
  \label{prop:homotopy_t}
  Let $X$ and $Y$ be two simplicial complexes such that $X \cup Y$ is a simplicial complex. Then if $\left|X\right| \cap \left|Y\right| \hookrightarrow \left|X\right|$ is a homotopy equivalence, then so is $\left|Y\right| \hookrightarrow \left|X \cup Y\right|$.
\end{proposition}

\begin{proposition} {Variation of \cite[Proposition 2.2]{Bar11}}
  \label{prop:comparison}
  Let $f,g : X \to Y$ be order-preserving maps between finite posets such that $\forall x\;f(x) \leq g(x)$. Then $\mathcal{B}(f)$ is homotopy-equivalent to $\mathcal{B}(g)$.
\end{proposition}

\begin{pf}
  $X$ has a finite set $M$ of maximal elements. Take any of them ($m_1$) and define $h_1 : X \to Y$ such that $h_1(m_1) = g(m_1)$ and $h_1 = f$ on all other elements of $X$. This is an order-preserving map due to the maximality of $m_1$. Take $M \setminus \{m_1\}$ and build $h_2$ which is equal to $h_1$ on complement to $m_2$ and to $g$ on $m_2$ and so on. We have built a finite sequence of maps $h_0 = f \leq h_1 \leq h_1 \leq \ldots \leq g = h_n$.\\

  Elements $h_i(m_i)$ and $h_{i-1}(m_i)$ are comparable.\\
  Hence there exists simplex $\{h_i(m_i); h_{i-1}(m_i)\}$ in $\mathcal{N}(Y)$. Since $\mathcal{N}(Y)$ is a simplicial complex, for other elements between selected where exist no holes and thus there is a linear homotopy between $h_{i-1}$ and $h_{i}$ which contracts simplex $\{h_i(m_i); h_{i-1}(m_i)\}$.\\

  Hence there is a homotopy between $f$ and $g$.
\end{pf}

\begin{proposition}
  Note that $\operatorname{lk}(\mathcal{N}(x)) = \mathcal{N}(X_{>x}) \star \mathcal{N}(X_{<x})$. Therefore $\left|\operatorname{lk}(\mathcal{N}(x))\right| = \mathcal{B}(X_{>x}) \star \mathcal{B}(X_{<x})$.
\end{proposition}

The crucial observation is the existence of the following covering for any $x \in X$.

\begin{equation}\label{covering}
  \mathcal{B}(X) = \mathcal{B}(X \setminus \{x\}) \cup \left|\operatorname{st}(\mathcal{N}(x))\right|.\\
\end{equation}

\begin{lemma}
  \label{lem:homotopy}
  Let $X$ be a finite poset and for $x \in X$ either $\mathcal{B}(X_{>x})$ or $\mathcal{B}(X_{<x})$ is contractible. Then embedding $\mathcal{B}(X \setminus \{x\}) \hookrightarrow \mathcal{B}(X)$ is a homotopy equivalence.
\end{lemma}

\begin{pf}
  By proposition $\left|\operatorname{lk}(\mathcal{N}(x))\right|$ is contractible. Hence its embedding to its cone $\left|\operatorname{st}(\mathcal{N}(x))\right|$ is a homotopy equivalence by Whitehead theorem. Lemma follows by Proposition \ref{prop:homotopy_t}.
\end{pf}

\begin{definition} {Variation of \cite[Proposition 2.1]{Bar11}}
  Let $f : X \to Y$ be an order-preserving map between posets. Denote orders ($\leq$) on $X$ and $Y$ as $R_X$ and $R_Y$. Then we define poset $M(f) = X \coprod Y$ with $R = R_X \cup R_Y \cup R_{f}$ where $(x,y) \in R_f$ if and only if $(f(x),y) \in R_Y$.\\

  We shall by analogy denote this poset a \define{mapping cylinder} of $f$. There are also defined canonical inсlusions $i_X : X \to M(f)$ and $i_Y : Y \to M(f)$.
\end{definition}

\begin{pf} \textbf{Quillen-McCord theorem}\\
  Let $X, Y$ be finite posets with an order-preserving map $f : X \to Y$.\\

  Every poset has a linear extension. Let $x_1, x_2, \ldots, x_n$ be an enumeration of $X$ in an arbitrary linear extension and $Y^r = \{x_1,\ldots,x_r\} \cup Y \subset M(f)$ for any $r$.\\

  Consider $Y^r_{>x_r} = Y_{\geq f(x_r)}$. $\mathcal{B}(Y_{\geq f(x_r)})$ is a cone over $\mathcal{B}(f(x_r))$. It is contractible, therefore $\mathcal{B}(Y^{r-1}) \hookrightarrow \mathcal{B}(Y^{r})$ is a homotopy equivalence by Lemma \ref{lem:homotopy}. By iteration $\mathcal{B}(j) : \mathcal{B}(Y^{0}) = \mathcal{B}(Y) \hookrightarrow \mathcal{B}(M(f)) = \mathcal{B}(Y^n)$ is homotopy equivalence between $BY$ and $M(f)$.\\

  Then consider a linear extension of $Y$ with enumeration $y_1,\ldots,y_m$ and $X^r = X \cup \{y_{r+1},\ldots,y_m\} \subset M(f)$. $X^{r-1}_{\leq y_r} = f^{-1}(Y_{\leqslant y_r})$. The latter is contractible by the condition of the theorem. Hence $\mathcal{B}(X^{r}) \hookrightarrow \mathcal{B}(X^{r-1})$ is a homotopy equivalence and by transitivity $\mathcal{B}(i_X)$ is a homotopy equivalence between $X$ and $M(f)$.\\

  Note that $i(x) \leqslant (i_Y \circ f)(x)$. By Proposition \ref{prop:comparison} $\mathcal{B}(i_X)$ is homotopic to $\mathcal{B}(i_Y \circ f) = \mathcal{B}(i_Y) \circ \mathcal{B}(f)$. Hence $\mathcal{B}(f)$ is the homotopy equivalence between $BX$ and $BY$.
\end{pf}

\subsubsection{Barmak's proof of homological Quillen-McCord theorem}

\begin{proposition} {\cite[Lemma 2.1]{Milnor56}}
  \label{prop:kunneth}
  Reduced homology modules with coefficients in a principal ideal domain of a join satisfy the relation
  $H_{r+1}(A \star B, R) \simeq \bigoplus_{i+j=r}(H_i(A,R) \otimes_R H_j(B,R)) \oplus \bigoplus_{i+j=r-1} \operatorname{Tor_1^R}(H_i(A,R),H_j(B,R))$.
\end{proposition}

\begin{lemma}
  \label{lem:trivialties}
  Let $X$ be a finite poset and for $x \in X$ either $H_i(\mathcal{B}(X_{< x}))$ or $H_i(\mathcal{B}(X_{> x}))$ with coefficients in a PID are equal to the homology of a point. Then embedding $\mathcal{B}(X \setminus \{x\}) \hookrightarrow \mathcal{B}(X)$ induces isomorphisms of all homology groups.
\end{lemma}

\begin{pf} ~ \par
  By Proposition \ref{prop:kunneth} $H_i(\left|\operatorname{lk}(\mathcal{N}(x))\right|) = H_i(\mathcal{B}(X_{>x}) \star \mathcal{B}(X_{<x}))$ are trivial for all indices $i$ --- $Tor$-functors vanish if any of their arguments is trivial.
  Application of Mayer-Vietoris long exact sequence to covering \eqref{covering} yields the lemma.
\end{pf}\\

Proof of the theorem is similar to the proof finishing the previous subsection. We write it here in detail in order to be able to highlight differences. Changed parts are written in italic.\\

\begin{pf} \textbf{Homological Quillen-McCord theorem}\\
Let $X, Y$ be finite posets with an order-preserving map $f : X \to Y$.\\

Every poset has a linear extension. Let $x_1, x_2, \ldots, x_n$ be an enumeration of $X$ in the fixed linear extension and $Y^r = \{x_1,\ldots,x_r\} \cup Y \subset M(f)$ for any $r$.\\

Consider $Y^r_{>x_r} = Y_{\geq f(x_r)}$. $\mathcal{B}(Y_{\geq f(x_r)})$ is a cone over $\mathcal{B}(f(x_r))$. It is contractible, therefore $\mathcal{B}(Y^{r-1}) \hookrightarrow \mathcal{B}(Y^{r})$ is a homotopy equivalence by Lemma \ref{lem:homotopy}. By iteration $\mathcal{B}(j) : \mathcal{B}(Y^{0}) = \mathcal{B}(Y) \hookrightarrow \mathcal{B}(M(f)) = \mathcal{B}(Y^n)$ is a homotopy equivalence between $BY$ and $M(f)$.\\

Then consider a linear extension of $Y$ with enumeration $y_1,\ldots,y_m$ and $X^r = X \cup \{y_{r+1},\ldots,y_n\} \subset M(f)$. $X^{r-1}_{\leq y_r} = f^{-1}(Y_{\leqslant y_r})$. \textit{The latter is acyclic over $R$ by condition of the theorem. Hence $\mathcal{B}(X^{r}) \hookrightarrow \mathcal{B}(X^{r-1})$ induces isomorphisms of all homology groups and by the functoriality of homology $\mathcal{B}(i)$ induces isomorphisms of all homology groups between $X$ and $M(f)$.}\\

Note that $i(x) \leqslant (j \circ f)(x)$. By Proposition \ref{prop:comparison} $\mathcal{B}(i)$ is homotopic to $\mathcal{B}(j \circ f) = \mathcal{B}(j) \circ \mathcal{B}(f)$. \textit{Homotopic maps induce the same maps on homology, $j$ is a homotopy equivalence and induces isomorphisms. Hence $\mathcal{B}(f)$ induces isomorphisms between $H_i(BX,R)$ and $H_i(BY,R)$.}
\end{pf}\\

We see two updates. The first one is essential, it requires Lemma \ref{lem:trivialties} and operates some equivalence propagating in a chain of length equal to the cardinality of $Y$. Second follows automatically from the functoriality of all used constructions.

\section{Apparatus for main results}

\subsection{Persistence objects and related constructions}

We have two types of persistence objects with similar definitions. It is appealing to form a general notion of a persistence object such that these definitions fall into special cases.\\

\begin{definition}
  Consider $I$ --- the poset category of a fixed linearly ordered set. There is a sequence category $Fun(I, \mathcal{C})$ of functors from $I$ to some category $\mathcal{C}$. We call objects of this category \define{persistence objects over $\mathcal{C}$}
\end{definition}

\begin{example} ~ \par
  \begin{itemize}
    \item Persistence complex is a persistence object over the category of chain complexes;
    \item Persistence $R$-module is a persistence object over the category of $R$-modules;
    \item Persistence simplicial set is a persistence object over the category $sSet$;
    \item Persistence poset is a persistence object over $Pos$;
    \item Persistence topological space is a persistence object over $Top$.
  \end{itemize}
\end{example}

\begin{definition}
  We denote images of morphisms in $I$ as \define{structure maps} of a persistence object over $\mathcal{C}$. For countable $I$ it is generally enough to consider the generating set of these morphisms, i.e. the set of indecomposable morphisms.
\end{definition}

We use the notation $(X,\phi)$ for ``Persistence object X with structure maps $\phi$ over fixed indexing category $I$''. We use notation $\phi_{ij}$ for a structure map between $X_i$ and $X_{j}$.\\

Consider $\mathcal{F}$ --- a functor from $\mathcal{C}$ to $\mathcal{D}$. It naturally extends to a functor between $Fun(I,\mathcal{C})$ and $Fun(I,\mathcal{D})$. Let $P$ be a persistence poset. Apparently $\mathcal{B}(P)$ is a persistence topological space.\\

\begin{definition}
  Persistence topological space $X$ is called \define{$\varepsilon$-acyclic} over $R$ if for all indices\\ $H_i(X,R) \stackrel{\varepsilon}{\sim} H_i(pt,R)$.
\end{definition}

\begin{definition}
  \define{Persistence poset of finite type} is a finite sequence of finite posets.\\

  In terms of functors ``finite sequence'' means that only the finite set of indices has a nontrivial image. It's convenient to define ``trivial object'' as the initial object where present.
\end{definition}

The property of being of finite type is preserved by functors that map initial objects to initial.\\

\begin{proposition}
  Let $X$ be a persistence poset of finite type. Then $BX$ has homology modules of finite type.
\end{proposition}

\begin{pf}
  The nerve of an empty poset is an empty simplicial set, which is an initial object. Hence $BX$ is a geometric realization of a simplicial complex of finite type. The homology of $BX$ can be computed as the homology of this simplicial complex. Hence homology modules of $BX$ are of finite type.
\end{pf}\\

\begin{corollary}
  In particular, $BX$ has finitely presented homology modules.
\end{corollary}

There is a general fact --- if some universal object exists in $C$, it can be constructed component-wise in $Fun(I,C)$. Let's inspect this component-wise construction of universal objects by example.\\

\begin{definition}
  Let $f = (f_1,\ldots,f_n,\ldots)$ be a map of persistence posets $(X, \phi)$ and $(Y, \psi)$. Then mapping cylinders $M(f_j)$ form persistence poset $M(f)$ with structure maps arising from the universal property of coproduct and structure maps of $X$ and $Y$.\\

  To be explicit consider the following diagram in $Pos$ with $i_X$, $j_Y$ being series of canonical inclusions.\\
  \begin{equation}
  \begin{tikzcd}
  X_{j}\arrow{r}{{i_X}_j}\arrow{d}{\phi_{i_X}} & X_j \coprod Y_j\arrow{d}{\zeta_j} & Y_{j}\arrow{l}{{i_Y}_j}\arrow{d}{\psi_{i_Y}} \\
  X_{j+1}\arrow{r}{{i_X}_{j+1}} & X_{j+1} \coprod Y_{j+1} & Y_{j+1}\arrow{l}{{i_Y}_{j+1}} \\
  \end{tikzcd}
  \end{equation}\\

  The existence of order-preserving maps $\zeta_j$ is guaranteed by the universal property of coproducts, they are set to be structure maps of $M(f)$. $(M(f), \zeta_j)$ is a \define{mapping cylinder of map of persistence posets}.\\

  We also have canonical inclusions $i_X$ and $i_Y$ arising from the same diagram.
\end{definition}

Other examples of such component-wise constructions are kernels, cokernels, and homology modules.\\

We can also define a subobject in $Fun(I, \mathcal{C})$.

\begin{definition} ~ \par
  Consider persistence object $(X,\phi)$ and subobjects $Y_i$ of $X_i$.\\

  Then if structure maps $\phi$ admit all pullbacks $\phi^{\star}$, $(Y,\phi^{\star})$ is a subobject of $(X, \phi)$.\\

  Pullback of $f : A \to B$ onto subobjects $[i]$ and $[j]$ is a map $f^{\star}$ between preimages of subobjects --- isomorphism classes $S$, $T$ of objects such that the diagram\\
  \begin{equation}
  \begin{tikzcd}
    S \arrow{d}{f^{\star}}\arrow{r}{[i]} & A\arrow{d}{f} \\
    T \arrow{r}{[j]} & B \\
  \end{tikzcd}
  \end{equation}
  commutes.
\end{definition}

Illustrative example is given by definition in $Fun(I, Pos)$.\\

\begin{definition} ~ \par
  Consider persistence poset $(X,\phi)$ and sets $Y_i \subset X_i$.\\

  If there is no element $y$ in any $Y_i$ such that $\phi(y) \not\in Y_{i+1}$ then component-wise inclusion $Y \to X$ commutes with structure maps and form an embedding of persistence posets. In this case $Y=(\ldots,Y_i,\ldots)$ is a \define {persistence subposet} of $X$.
\end{definition}

We can also define an \define{element} of a persistence poset.
\begin{definition}
  Let $(X,\phi)$ be a persistence poset, $x_i \in X_i$ such that $x_i$ has no preimages under structure maps. In all components with degrees above $i$ there exist elements $\phi(x_i)$ in components. We define $x_j = \bot$ for $j < i$ for consistency of the definition.
\end{definition}

Although this definition operates the contradiction it is eliminated by applications.\\
For instance, we can consider the following example of a subposet.
\begin{example}
  Let $x$ be an element of the persistence subposet $(X, \phi)$. Then we can define $X_{<x}$ component-wise as the poset of elements less than $x$ and as a trivial poset if $x_i = \bot$.\\

  $X_{<x}$ contains component-wise only elements comparable with $x$. Since structure maps are order-preserving, $X_{<x}$ is a subposet.
\end{example}

Finally, we give a definition of \define{persistence covering}.\\

\begin{definition}
  Assume a poset $X$ splits into subposets $X_j$. It is not a trivial assumption since arbitrary split can lose some structure maps. Then every subposet $X_j$ has its own classifying space $BX_j$. If these spaces (or minimal open sets containing them) cover the whole $BX$, they are called a \define{persistence covering}.
\end{definition}

This definition gives an example of how structures in the category of persistence posets can be transferred to other persistence categories. It is possible to reformulate the definition as internal to the category of persistence topological spaces but we prefer to keep a more constructive way.


\subsection{Order extension principle for persistence posets}

In his proof of the Quillen-McCord theorem Barmak relies on the order extension principle. To be able to transfer Barmak's proof of Quillen-McCord theorem to the persistent case we have to stress a similar statement for persistence posets.

\begin{definition}
  We denote as \define{extension of persistence poset} $X$ series of partially-ordered extensions of $X_i$ such that the structure maps of $X$ are well-defined on these extensions. If extensions of all components are linear we call this series linear extension.
\end{definition}

\begin{proposition}
  \textbf{Transfer of order}. Let $f$ be a morphism between posets $X$ and $Y$ and $\overline{Y}$ be a linear extension of $Y$. Then $f$ induces partially ordered extension $\hat{X}$ of $X$ such that $f$ is well-defined as map $\hat{X} \to \overline{Y}$.
\end{proposition}

\begin{pf}
  Consider two incomparable points $a, b \in X$ and map $f : X \to \overline{Y}$ which is obviously well-defined.\\
  One of the following hold.\\
  \begin{itemize}
    \item f(b) < f(a)
    \item f(a) < f(b)
    \item f(a) = f(b)
  \end{itemize}
  If strict inequality holds, we can impose a single relation on $a$ and $b$ --- we inherit relation from images.\\
  If equality holds we do not add any new relation.
\end{pf}

\begin{proposition}
  \textbf{Left propagation of linear extension.} Assume indexing set $I^{op}$ of persistence poset $(X,\phi)$ is well-founded and there exists maximal index $i$ such that $X_j = \emptyset$ for any $j > i$. Then $(X,\phi)$ has a linear extension.
\end{proposition}

\begin{pf}
  We can extend the order on the component $X_i$ to linear. Given this order, we can transfer it to the left via all possible structure maps. We obtain an extension of $(X,\phi)$ because all preimages of incomparable elements were incomparable and we have equipped them with compatible orders. Now let's assume we obtained linear orders in components $X_j$ for $j > j_0$ by this construction. Then $X_{j_0}$ can be linearly extended. The proposition follows by transfinite induction and by simple induction if $X$ is finite.
\end{pf}\\

This statement can also be seen as a corollary of a more general proposition.
One can consider set $E(X,\phi)$ of extensions of persistence poset $(X,\phi)$ with partial order defined as follows: let $Y, Z$ be extensions of $X$, then $Y \geq Z$ if and only if $Y$ is an extension of $Z$. Since underlying sets of these extensions are always the same we can identify elements of $E(X,\phi)$ with tuples of order relations on components of $X$.

\begin{proposition}
  Every linearly ordered subset of $E(X,\phi)$ has an upper bound in $E(X,\phi)$.
\end{proposition}

\begin{pf}
  Let $\{R^s|\;s \in S\}$ be a linearly ordered subset of $E(X,\phi)$ indexed by set $S$. Consider $R = \bigcup R^s$ where the union is taken component-wise. Assume for some elements $a, b \in X_i$ for some $i$ some $\phi_{ij}$ cannot be defined on them as an order-preserving map. Then there exists $s \in S$ such that $a$ and $b$ are comparable in extension $R^s$. But $R^s$ is an extension, hence $\phi_{ij}$ is defined on both $a$ and $b$. By contradiction, proposition follows.
\end{pf}

\begin{proposition}
  \textbf{Persistent order extension principle.} Every persistence poset $(X,\phi)$ has linear extension.
\end{proposition}

\begin{pf}
  By Zorn's lemma $E(X,\phi)$ has maximal element $M$. Assume this element is not a linear extension of $(X,\phi)$.\\

  Then in some $M_i$ there exists incomparable pair $(a,b)$. Consider $\phi_{ij}(a)$ and $\phi_{ij}(b)$ for all $j > i$. Assume without loss of generality for $j_2 > j_1$ that $\phi_{ij_1}(a) > \phi_{ij_1}(b)$ and $\phi_{ij_2}(a) < \phi_{ij_2}(b)$. Then the map $\phi_{j_1j_2}$ cannot be defined. Hence any $j$ relation between images of $a$ and $b$ has the same sign if exists. If there exists such $j$ that relation between $\phi_{ij}(a)$ and $\phi_{ij}(b)$ exists we define relation between $a$ and $b$ accordingly. Otherwise, we define it arbitrarily and propagate order to the left --- all preimages of $a$ and $b$ were incomparable and are now equipped with compatible orders.\\

  We have constructed an extension of $M$ which is taken to be maximal. Hence $M$ must be a linear extension of $(X,\phi)$.
\end{pf}

\subsection{Approximation distances}

Persistence modules give us the first example of an approximation distance. We can infer some results.\\

\begin{proposition} ~ \par
  \label{prop:sum}
  Let $A$, $B$ be two persistence modules such that $d(A,0) \leq \varepsilon$ and $d(B,0) \leq \varepsilon$. Then $d(A \oplus B,0) \leq \varepsilon$.
\end{proposition}

\begin{pf}
  $\alpha A \oplus \alpha B = \alpha(A \oplus B)$. The result follows by Proposition $\ref{epstriv}$ via Theorems 1 and 2.
\end{pf}

\begin{proposition} ~ \par
  \label{prop:tensor}
  Let $A$, $B$ be two persistence modules such that $d(A,0) \leq \varepsilon$ and $d(B,0) \leq \varepsilon$. Then $d(A \otimes B,0) \leq \varepsilon$.
\end{proposition}

\begin{pf}
  The result follows from bilinearity of the tensor product and Theorems 1 and 2.
\end{pf}

\begin{proposition}
  \label{prop:hominter}
  Let $P = \ldots \to P_n \to P_{n-1} \to \ldots$ be a persistence complex such that for all $i$'s $P_i \stackrel{\varepsilon}{\sim} 0$. Then the homology modules of $P$ are $\varepsilon$-interleaved with $0$.
\end{proposition}

\begin{pf}
  Assume $d_i$ is a differential in a complex. We know that $0 \to \operatorname{im}{d_{i+1}} \to \ker{d_{i}} \to H_i(P) \to 0$ is exact and that $0 \to \ker{d_i} \to P_i \to P_{i-1} \to 0$ is exact. The result follows by the application of Lemma 1 twice.
\end{pf}\\

\begin{proposition} {\cite[Page 2]{Mitchell81}}\\
  Category $Fun(I, $R$-Mod)$ has enough projectives.
\end{proposition}

Since we have enough projectives we can compute derived functors. We need the following proposition.\\

\begin{proposition}
  \label{prop:tor}
  Let $R$ be commutative ring, $A$ and $B$ --- $R$-modules such that either $A$ or $B$ is $\varepsilon$-interleaved with $0$. Then $Tor_i^R(A,B) \stackrel{\varepsilon}{\sim} 0$.
\end{proposition}

\begin{pf}
  Since $R$ is commutative, $Tor_i^R(A,B) = Tor_i^R(B,A)$. Without loss of generality assume $B \stackrel{\varepsilon}{\sim} 0$. Let $P$ be the projective resolution of $A$. After taking the tensor product we obtain by Proposition \ref{prop:tensor} sequence of modules $\varepsilon$-interleaved with $0$. The proposition follows by Proposition \ref{prop:hominter}.
\end{pf}\\

We can also derive the result about exact sequences.\\

\begin{proposition}
  \label{major}
  Let $A \xrightarrow{f} B \xrightarrow{\phi} C \xrightarrow{g} D$ be an exact sequence in the category of persistence modules. Then if $d(A,0) \leq \varepsilon$ and $d(D,0) \leq \varepsilon$, then $B \stackrel{4\varepsilon}{\sim} C$.
\end{proposition}

\begin{pf}
  Under conditions of theorems 1 and 2, we can identify the category of persistence modules and the category of non-negatively graded modules.\\

  In s.e.s $0 \to \ker{f} \hookrightarrow A \xrightarrow{f} \operatorname{im}f \to 0$ $\operatorname{im}f$ is $\varepsilon$-trivial. By exactness, it is equal to $K = \ker \phi$. On the other side from $0 \to \ker{g} \xrightarrow{g} D \to D \to 0$ there follows that $d(I = \operatorname{im} \phi, 0) \leq \varepsilon$. Hence by transitivity $K \stackrel{2\varepsilon}{\sim} I$.\\

  We obtain an exact sequence $0 \to K \to B \xrightarrow{\phi} C \to I \to 0$. This sequence decomposes into sequences $0 \to K \to B \to \operatorname{coIm}\phi$ and $0 \to \operatorname{Im}\phi \to C \to I \to 0$. By lemma \ref{ops} we have that $d(B,\operatorname{coIm}\phi) \leq 2\varepsilon$ and $d(C,\operatorname{Im}\phi) \leq 2\varepsilon$. $coIm$ and $Im$ are pointwise canonically isomorphic by the first isomorphism theorem for modules, hence $d(B, C) \leq 4\varepsilon$.
\end{pf}\\

\section{Main results}

\begin{proposition}
  \label{prop:acyclic}
  Let $A$ and $B$ be two persistence topological spaces with at least one of them being $\varepsilon$-acyclic over $R$. Then $A \star B$ is $\varepsilon$-acyclic over $R$.
\end{proposition}

\begin{pf}
  All $Tor$-functors from Proposition \ref{prop:kunneth} are $\varepsilon$-interleaved with $0$ by Proposition \ref{prop:tor}. Hence by Proposition \ref{prop:sum} the right hand side of expression of Proposition \ref{prop:kunneth} is $\varepsilon$-equivalent to $0$.\\
\end{pf}\\

\begin{proposition}
  Let $x$ be an element of $(X,\phi)$. Then coverings \eqref{covering} of all components of $X$ form the persistence covering $\mathcal{U}$ with covering sets $U_1$ --- preimage of $\operatorname{st}(\mathcal{N}(x))$ under nerve functor and $U_2 = X \setminus \{x\}$.
\end{proposition}

\begin{pf}
  It suffices to check that $X \setminus \{x\}$ and preimage of $st(\mathcal{N}(x))$ are subposets.\\

  It is evident for $X \setminus \{x\}$. Elements in the preimage of $\operatorname{st}(\mathcal{N}(x_i))$ are exactly elements comparable to $x_i$. Since structure maps preserve order, they do not move comparable elements to incomparable ones. Hence preimage also forms a subposet.
\end{pf}\\

\begin{lemma}
  Let $(X,\phi)$ be a persistence poset and for $x=(\ldots,x_i,\phi(x_i),\ldots) \in X$ either $\mathcal{B}(X_{< x})$ or $\mathcal{B}(X_{> x})$ is $\varepsilon$-acyclic. Then persistent homology of $\mathcal{B}(X \setminus \{x\})$ and $\mathcal{B}(X)$ are $4\varepsilon$-interleaved.
\end{lemma}

\begin{pf} ~ \par
  By Proposition \ref{prop:acyclic} $\left|\operatorname{lk}(\mathcal{N}(x))\right|$ is $\varepsilon$-acyclic.\\

  Given persistence covering we can define Mayer-Vietoris exact sequence on persistence homology modules component-wise by gluing sequences for components over structure maps. Proposition \ref{major} yields the lemma.
\end{pf}

\begin{remark}
  If map $f$ is a component-wise homotopy equivalence, it induces $0$-interleaving of homology modules.
\end{remark}

We are now ready to adapt known proof to Quillen-McCord theorem for persistence posets.

\begin{theorem} \textbf{Approximate Quillen-McCord theorem}\\
  Assume $X, Y$ are persistence posets of finite type indexed by very good monoid $I$, $f : X \to Y$ is an order-preserving map. Let $m$ be the number of elements of $Y$ and $R$ is a PID.\\

  Then if $\forall y=(\ldots,y_i,\ldots) \in Y\;\mathcal{B}(f^{-1}(Y_{\leqslant y}))$ is $\varepsilon$-acyclic over $R$, $BX$ and $BY$ are $4m\varepsilon$-interleaved over $R$.\\
\end{theorem}

\begin{pf} \textbf{Approximate Quillen-McCord theorem}\\
  Let $X, Y$ be persistence posets of finite type with an order-preserving map $f : X \to Y$.\\

  Let $\overline{X}$ be a linear extension of $X$. Recall that an element of a persistence poset is an initial element $x \in X_i$ with its images under all structure maps. We can enumerate all elements of $X$ by lexicographic order of pairs $(i,r)$ with $i$ --- index of a component in which element is born and $r$ --- the number of its initial element in order on $\overline{X}$.

  Let $Y^r \subset M(f)$ be a union of the first $r$ elements of $X$ and $Y$. It is a persistence subposet of $M(f)$ with extended order on $X$.\\

  Consider $Y^r_{>x_r} = Y_{\geq f(x_r)}$. $\mathcal{B}(Y_{\geq f(x_r)})$ is a component-wise cone over $\mathcal{B}(f(x_r))$. It is component-wise contractible, therefore $\mathcal{B}(Y^{r-1}) \hookrightarrow \mathcal{B}(Y^{r})$ is a component-wise homotopy equivalence by Lemma \ref{lem:homotopy}. By iteration $\mathcal{B}(i_Y) : \mathcal{B}(Y^{0}) = \mathcal{B}(Y) \hookrightarrow \mathcal{B}(M(f)) = \mathcal{B}(Y^n)$ is a component-wise homotopy equivalence between $BY$ and $M(f)$. Note that persistence structure is not used here.\\

  Then consider a linear extension of $Y$ with the enumeration of elements and $X^r \subset M_i(f)$ constructed analogously. $X^{r-1}_{\leq y_r} = f^{-1}(Y_{\leqslant y_r})$. Latter is $\varepsilon$-acyclic over $\mathbb{F}$ by the condition of the theorem. Hence homology modules of $\mathcal{B}(X^{r})$ and $\mathcal{B}(X^{r-1})$ are $4\varepsilon$-interleaved. By transitivity of $\varepsilon$-equivalence homology of $BX$ and $M(f)$ are $4m\varepsilon$-interleaved.\\

  We have that $H_i(BX) \stackrel{4m\varepsilon}{\sim} H_i(M(f))$ and $H_i(M(f)) \stackrel{0}{\sim} H_i(BY)$ for all $i$. Hence $H_i(BX) \stackrel{4m\varepsilon}{\sim} H_i(BY)$.
\end{pf}\\

We expect the stronger statement with no conditions on $R$ to be true with another error multiple and that it can be proved using the technique of this paper by considering error propagation in Kunneth spectral sequence.

\begin{thebibliography}{99}
  \bibitem[Bar11]{Bar11}
  Jonathan Ariel Barmak. 2011.
  \newblock On Quillen’s Theorem A for posets.
  \newblock J. Comb. Theory Ser. A 118, 8 (November 2011), 2445–2453.
  \newblock DOI:https://doi.org/10.1016/j.jcta.2011.06.008
  \bibitem[Zomorodian05]{Zomorodian05}
  A. Zomorodian and G. Carlsson.
  \newblock Computing persistent homology.
  \newblock Discrete and Computational Geometry 33.2 (2005), pp. 249–274.
  \bibitem[GS16]{GS16}
  Govc, Dejan \& Skraba, Primoz. (2016).
  \newblock An Approximate Nerve Theorem.
  \newblock Foundations of Computational Mathematics.
  \newblock 10.1007/s10208-017-9368-6.
  \bibitem[Corbet18]{Corbet18}
  Corbet, R., Kerber, M.
  \newblock The representation theorem of persistence revisited and generalized.
  \newblock J Appl. and Comput. Topology 2, 1–31 (2018).
  \newblock https://doi.org/10.1007/s41468-018-0015-3
  \bibitem[Quillen72]{Quillen72}
  Daniel Quillen,
  \newblock Higher algebraic K-theory, I: Higher K-theories Lect.
  \newblock Notes in Math. 341 (1972), 85-1
  \bibitem[Milnor56]{Milnor56}
  Milnor, J. (1956).
  \newblock Construction of Universal Bundles, II.
  \newblock Annals of Mathematics, 63(3), second series, 430-436.
  \newblock doi:10.2307/1970012
  \bibitem[deSilva18]{deSilva18}
  Vin de Silva and E. Munch and Anastasios Stefanou,
  \newblock Theory of interleavings on categories with a flow.
  \newblock Theory and Applications of Categories, Vol. 33, No. 21, 2018, pp. 583–607.
  \bibitem[Mitchell81]{Mitchell81}
  Barry Mitchell,
  \newblock A Remark on Projectives in Functor Categories.
  \newblock Journal of Algebra 69, 24-31 (1981).
  \bibitem[Bubenik15]{Bubenik15}
  Peter Bubenik, Vin de Silva, Jonathan Scott,
  \newblock Metrics for generalized persistence modules.
  \newblock Foundations of Computational Mathematics volume 15, pages 1501–1531 (2015)
\end{thebibliography}

\end{document}
